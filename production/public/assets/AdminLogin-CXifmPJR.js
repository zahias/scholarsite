import{u as h,a as p,j as e,C as g,f as j,t as w,g as b,h as f,d as N,I as n,Z as v,e as F,_ as S}from"./index-DsMkGSNQ.js";import{u as y,F as C,a as o,b as l,c as d,d as c,e as m,z as r,t as I}from"./form-DwDJHa6e.js";import{u as L}from"./useMutation-BIiySL2y.js";import{M}from"./mail-D8dE7q13.js";import"./label-DBXjDKEQ.js";const P=r.object({email:r.string().email("Invalid email address"),password:r.string().min(1,"Password is required")});function R(){const[,x]=h(),{toast:t}=p(),a=y({resolver:I(P),defaultValues:{email:"",password:""}}),i=L({mutationFn:async s=>(await S("POST","/api/auth/login",s)).json(),onSuccess:s=>{if(s.user.role!=="admin"){t({title:"Access Denied",description:"This area is for administrators only.",variant:"destructive"});return}t({title:"Welcome back!",description:`Logged in as ${s.user.firstName}`}),x("/admin")},onError:s=>{t({title:"Login Failed",description:s.message||"Invalid email or password",variant:"destructive"})}}),u=s=>{i.mutate(s)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(g,{className:"w-full max-w-md bg-white/5 backdrop-blur-lg border-white/10",children:[e.jsxs(j,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center mb-4",children:e.jsx(w,{className:"w-6 h-6 text-orange-400"})}),e.jsx(b,{className:"text-2xl text-white",children:"Scholar.name Admin"}),e.jsx(f,{className:"text-slate-400",children:"Sign in to manage customer sites"})]}),e.jsx(N,{children:e.jsx(C,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-4",children:[e.jsx(o,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-slate-300",children:"Email"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"email",placeholder:"admin@scholar.name",className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-slate-500","data-testid":"input-email"})]})}),e.jsx(m,{})]})}),e.jsx(o,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-slate-300",children:"Password"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"password",placeholder:"Enter your password",className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-slate-500","data-testid":"input-password"})]})}),e.jsx(m,{})]})}),e.jsx(F,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white",disabled:i.isPending,"data-testid":"button-login",children:i.isPending?"Signing in...":"Sign In"})]})})})]})})}export{R as default};
