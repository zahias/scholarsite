import{u as E,b as U,j as e}from"./vendor-query-CD7Z7DR7.js";import{c as L,i as M,S as y,G as g,C as m,l as f,m as N,n as b,k as d,B as x,w as a,I as v,a8 as R,W as q}from"./index-DZiZVccx.js";import{u as z,z as h}from"./vendor-forms-Cwr-vjy6.js";import{F as B,a as C,b as w,c as k,d as P,e as S,t as O}from"./form-BcpPOYBg.js";import{S as D}from"./shield-ZMtiI_oy.js";import"./vendor-react-DHpf67ko.js";import"./vendor-charts-4dyn6-nb.js";import"./label-DGI15HAV.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=L("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),T=h.object({customerName:h.string().min(1,"Name is required"),customerEmail:h.string().email("Valid email is required")}),Y={starter:{monthly:9.99,yearly:95.88,name:"Starter"},pro:{monthly:19.99,yearly:191.88,name:"Pro"}};function Z(){var j;const[,c]=M(),l=new URLSearchParams(window.location.search),t=l.get("plan")||"starter",n=l.get("billing")||"monthly",F=l.get("openalexId")||void 0,o=Y[t],u=n==="yearly"?o.yearly:o.monthly,{data:p}=E({queryKey:["/api/checkout/config"]}),i=z({resolver:O(T),defaultValues:{customerName:"",customerEmail:""}}),r=U({mutationFn:async s=>(await q("POST","/api/checkout/create-session",{...s,plan:t,billingPeriod:n,openalexId:F})).json(),onSuccess:s=>{s.redirectUrl?window.location.href=s.redirectUrl:s.fallbackUrl&&c(s.fallbackUrl)}}),I=s=>{r.mutate(s)};return p&&!p.isConfigured?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(y,{title:"Checkout — Scholar.name",description:"Complete your order for a Scholar.name research portfolio.",url:"https://scholar.name/checkout",type:"website"}),e.jsx(g,{mode:"auth"}),e.jsx("div",{className:"max-w-md mx-auto px-4 py-16",children:e.jsxs(m,{children:[e.jsxs(f,{className:"text-center",children:[e.jsx(N,{children:"Payment Coming Soon"}),e.jsx(b,{children:"Online payment is being set up. Please contact us to get started."})]}),e.jsx(d,{children:e.jsx(x,{className:"w-full",onClick:()=>c("/contact"),children:"Contact Us"})})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:[e.jsx(y,{title:"Checkout — Scholar.name",description:"Complete your order for a Scholar.name research portfolio.",url:"https://scholar.name/checkout",type:"website"}),e.jsx(g,{mode:"auth"}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Complete Your Order"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"You're one step away from your professional research portfolio."}),e.jsx(m,{className:"mb-6",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[o.name," Plan"]}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[n," billing"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",u.toFixed(2)]}),e.jsxs("span",{className:"text-muted-foreground",children:["/",n==="yearly"?"year":"month"]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t==="starter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"scholar.name subdomain"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Publication analytics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Monthly data sync"})]})]}),t==="pro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Custom domain (yourname.com)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Research Passport download"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Weekly data sync"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"Secure payment powered by MontyPay"})]})]}),e.jsxs("div",{children:[e.jsxs(m,{children:[e.jsxs(f,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Your Details"]}),e.jsx(b,{children:"Enter your information to proceed to payment"})]}),e.jsx(d,{children:e.jsx(B,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(I),className:"space-y-4",children:[e.jsx(C,{control:i.control,name:"customerName",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{children:"Full Name"}),e.jsx(P,{children:e.jsx(v,{placeholder:"Dr. Jane Smith",...s,"data-testid":"input-customer-name"})}),e.jsx(S,{})]})}),e.jsx(C,{control:i.control,name:"customerEmail",render:({field:s})=>e.jsxs(w,{children:[e.jsx(k,{children:"Email Address"}),e.jsx(P,{children:e.jsx(v,{type:"email",placeholder:"jane.smith@university.edu",...s,"data-testid":"input-customer-email"})}),e.jsx(S,{})]})}),r.error&&e.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:((j=r.error)==null?void 0:j.message)||"Payment failed. Please try again."}),e.jsx(x,{type:"submit",className:"w-full",size:"lg",disabled:r.isPending,"data-testid":"button-proceed-to-payment",children:r.isPending?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Proceed to Payment - $",u.toFixed(2)]})}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"By proceeding, you agree to our Terms of Service and Privacy Policy."})]})})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(x,{variant:"ghost",onClick:()=>c("/#pricing"),"data-testid":"button-back-to-pricing",children:"← Back to pricing"})})]})]})})]})}export{Z as default};
