import{u as w,b as h,j as e}from"./vendor-query-CD7Z7DR7.js";import{r as i}from"./vendor-react-DHpf67ko.js";import{c as E,i as Ts,j as Us,r as he,B as c,C as d,l as p,m as u,a0 as Es,n as j,k as m,I as x,p as Q,t as Is,q as F,R as pe,V as f,O as g,v as Os,T as xs}from"./index-BVqimLhm.js";import{T as hs}from"./textarea-DIpy0yMO.js";import{T as Ls,a as Ms,b as A,c as T,Q as qs}from"./tabs-DQQb8GNn.js";import{S as _}from"./skeleton-CsLyhTnv.js";import{S as G}from"./separator-Ml9BTPnQ.js";import{L as H}from"./label-CQfckDKz.js";import{U as ue}from"./user-BicejYAW.js";import{E as U}from"./external-link-wvgwl-pf.js";import{L as $s,C as Rs,S as Vs}from"./settings-C5iwAG2V.js";import{C as ps}from"./circle-check-big-B2xoj36F.js";import{A as Ys}from"./award-B8CT3Z3r.js";import{F as C}from"./file-text-faVa3UG5.js";import{S as je}from"./save-CBYkhcwG.js";import{S as us}from"./star-P7Ey3Fat.js";import{T as ge}from"./trash-2-B89LEXna.js";import{P as zs}from"./plus-BUnThIpg.js";import{E as W,a as X}from"./eye-CMwa-VfA.js";import{C as Bs}from"./circle-x-DNq3U13h.js";import{C as js}from"./clock-Sf1Pf5sF.js";import{P as Ds}from"./palette-j0A0WcOs.js";import{D as Ks}from"./download-BtEd9by0.js";import"./vendor-charts-4dyn6-nb.js";import"./index-BfYptu5S.js";import"./index-C9O0koVv.js";import"./index-B1CoDt99.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=E("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=E("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=E("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=E("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=E("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=E("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function St(){var We,Xe,Je,Ze,es,ss,ts,as,rs,ls,is,ns,cs,os,ds,ms;const[,ye]=Ts(),{toast:a}=Us(),[v,J]=i.useState(""),[ve,be]=i.useState(""),[we,Ce]=i.useState(""),[Se,Pe]=i.useState(""),[ke,Fe]=i.useState(""),[Ae,Te]=i.useState(""),[Ue,Ee]=i.useState(""),[Ie,Oe]=i.useState(""),[Le,Me]=i.useState(""),[qe,$e]=i.useState(""),[z,Re]=i.useState(!1),Z=i.useRef(null),Ve=i.useRef(null),[ee,se]=i.useState(!0),[gs,te]=i.useState(null),[ae,Ye]=i.useState(""),[I,ze]=i.useState(""),[re,Be]=i.useState(""),[le,fs]=i.useState(!1),[ie,Ns]=i.useState(!1),[ne,ce]=i.useState(null),[O,L]=i.useState(""),[M,q]=i.useState(""),[De,B]=i.useState("custom"),{data:b,isLoading:ys}=w({queryKey:["/api/auth/me"]}),{data:r,isLoading:vs}=w({queryKey:["/api/researcher/my-tenant"],enabled:!!(b!=null&&b.user)}),{data:N,isLoading:Ws,refetch:Ke}=w({queryKey:["/api/openalex/author",(Xe=(We=r==null?void 0:r.tenant)==null?void 0:We.profile)==null?void 0:Xe.openalexId],enabled:!!((Ze=(Je=r==null?void 0:r.tenant)==null?void 0:Je.profile)!=null&&Ze.openalexId)}),{data:$}=w({queryKey:["/api/themes"]}),{data:S}=w({queryKey:["/api/researcher/publications"],enabled:!!((ss=(es=r==null?void 0:r.tenant)==null?void 0:es.profile)!=null&&ss.openalexId)}),{data:D}=w({queryKey:["/api/researcher/sections"],enabled:!!((ts=r==null?void 0:r.tenant)!=null&&ts.profile)}),{data:R,refetch:bs}=w({queryKey:["/api/researcher/sync-logs"],enabled:!!((as=r==null?void 0:r.tenant)!=null&&as.profile)});i.useEffect(()=>{var s;if((s=r==null?void 0:r.tenant)!=null&&s.profile){const t=r.tenant.profile;J(t.openalexId||""),be(t.displayName||""),Ce(t.title||""),Pe(t.bio||""),Fe(t.websiteUrl||""),Te(t.twitterUrl||""),Ee(t.linkedinUrl||""),Oe(t.googleScholarUrl||""),Me(t.orcidUrl||""),$e(t.researchGateUrl||""),se(t.isPublic!==!1),te(t.selectedThemeId||null)}},[r]);const ws=h({mutationFn:async()=>{await f("POST","/api/auth/logout")},onSuccess:()=>{g.clear(),ye("/dashboard/login")}}),V=h({mutationFn:async s=>(await f("PATCH","/api/researcher/profile",s)).json(),onSuccess:()=>{a({title:"Saved!",description:"Your profile has been updated."}),g.invalidateQueries({queryKey:["/api/researcher/my-tenant"]})},onError:s=>{a({title:"Error",description:s.message,variant:"destructive"})}}),P=h({mutationFn:async()=>(await f("POST","/api/researcher/sync")).json(),onSuccess:()=>{a({title:"Synced!",description:"Your profile data has been refreshed from OpenAlex."}),g.invalidateQueries({queryKey:["/api/researcher/my-tenant"]}),Ke()},onError:s=>{a({title:"Sync Failed",description:s.message,variant:"destructive"})}}),Y=h({mutationFn:async s=>{const t=await fetch(`https://api.openalex.org/authors/${s}`);if(!t.ok)throw new Error("Author not found in OpenAlex");return t.json()},onSuccess:async s=>{a({title:"Author Found!",description:`${s.display_name} with ${s.works_count} publications`}),await V.mutateAsync({openalexId:v}),Ke()},onError:()=>{a({title:"Not Found",description:"Could not find this author in OpenAlex. Check the ID.",variant:"destructive"})}}),K=h({mutationFn:async s=>{const t=new FormData;t.append("photo",s);const l=await fetch("/api/researcher/upload-photo",{method:"POST",body:t,credentials:"include"});if(!l.ok){const k=await l.json();throw new Error(k.message||"Failed to upload photo")}return l.json()},onSuccess:()=>{a({title:"Photo Updated!",description:"Your profile photo has been uploaded."}),g.invalidateQueries({queryKey:["/api/researcher/my-tenant"]})},onError:s=>{a({title:"Upload Failed",description:s.message,variant:"destructive"})}}),oe=h({mutationFn:async s=>{const t=new FormData;t.append("cv",s);const l=await fetch("/api/researcher/upload-cv",{method:"POST",body:t,credentials:"include"});if(!l.ok){const k=await l.json();throw new Error(k.message||"Failed to upload CV")}return l.json()},onSuccess:()=>{a({title:"CV Uploaded!",description:"Your CV has been uploaded successfully."}),g.invalidateQueries({queryKey:["/api/researcher/my-tenant"]})},onError:s=>{a({title:"Upload Failed",description:s.message,variant:"destructive"})}}),Qe=h({mutationFn:async()=>(await f("DELETE","/api/researcher/cv")).json(),onSuccess:()=>{a({title:"CV Removed",description:"Your CV has been removed from your profile."}),g.invalidateQueries({queryKey:["/api/researcher/my-tenant"]})},onError:s=>{a({title:"Error",description:s.message,variant:"destructive"})}}),de=h({mutationFn:async s=>(await f("PATCH","/api/auth/password",s)).json(),onSuccess:()=>{a({title:"Password Changed!",description:"Your password has been updated successfully."}),Ye(""),ze(""),Be("")},onError:s=>{a({title:"Error",description:s.message,variant:"destructive"})}}),Cs=s=>{var l;const t=(l=s.target.files)==null?void 0:l[0];if(t){if(t.size>5*1024*1024){a({title:"File too large",description:"Please choose an image under 5MB",variant:"destructive"});return}K.mutate(t)}},Ss=s=>{var l;const t=(l=s.target.files)==null?void 0:l[0];if(t){if(t.size>10*1024*1024){a({title:"File too large",description:"Please choose a document under 10MB",variant:"destructive"});return}oe.mutate(t)}},Ps=()=>{if(I!==re){a({title:"Passwords don't match",description:"New password and confirmation must match",variant:"destructive"});return}if(I.length<8){a({title:"Password too short",description:"Password must be at least 8 characters",variant:"destructive"});return}de.mutate({currentPassword:ae,newPassword:I})},ks=async s=>{se(s);try{await V.mutateAsync({isPublic:s})}catch{se(!s)}},Fs=async s=>{var t,l;te(s);try{await V.mutateAsync({selectedThemeId:s})}catch{te(((l=(t=r==null?void 0:r.tenant)==null?void 0:t.profile)==null?void 0:l.selectedThemeId)||null)}},_e=h({mutationFn:async({publicationId:s,isFeatured:t})=>(await f("PATCH",`/api/researcher/publications/${s}/feature`,{isFeatured:t})).json(),onSuccess:()=>{g.invalidateQueries({queryKey:["/api/researcher/publications"]})},onError:s=>{a({title:"Error",description:s.message,variant:"destructive"})}}),Ge=h({mutationFn:async s=>(await f("POST","/api/researcher/sections",s)).json(),onSuccess:()=>{a({title:"Section Created!",description:"Your new section has been added."}),g.invalidateQueries({queryKey:["/api/researcher/sections"]}),L(""),q(""),B("custom")},onError:s=>{a({title:"Error",description:s.message,variant:"destructive"})}}),me=h({mutationFn:async({id:s,...t})=>(await f("PATCH",`/api/researcher/sections/${s}`,t)).json(),onSuccess:()=>{a({title:"Section Updated!",description:"Your changes have been saved."}),g.invalidateQueries({queryKey:["/api/researcher/sections"]}),ce(null),L(""),q("")},onError:s=>{a({title:"Error",description:s.message,variant:"destructive"})}}),As=h({mutationFn:async s=>(await f("DELETE",`/api/researcher/sections/${s}`)).json(),onSuccess:()=>{a({title:"Section Deleted",description:"The section has been removed."}),g.invalidateQueries({queryKey:["/api/researcher/sections"]})},onError:s=>{a({title:"Error",description:s.message,variant:"destructive"})}}),He=async()=>{Re(!0);try{await V.mutateAsync({displayName:ve||null,title:we||null,bio:Se||null,websiteUrl:ke||null,twitterUrl:Ae||null,linkedinUrl:Ue||null,googleScholarUrl:Ie||null,orcidUrl:Le||null,researchGateUrl:qe||null})}finally{Re(!1)}};if(ys||vs)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsx(_,{className:"h-20 w-full"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(_,{className:"h-32"}),e.jsx(_,{className:"h-32"}),e.jsx(_,{className:"h-32"})]})]})});if(!(b!=null&&b.user))return ye("/dashboard/login"),null;const o=r==null?void 0:r.tenant,n=o==null?void 0:o.profile,y=((rs=o==null?void 0:o.domains)==null?void 0:rs.find(s=>s.isPrimary))||((ls=o==null?void 0:o.domains)==null?void 0:ls[0]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx("header",{className:"border-b bg-white sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#0B1F3A] to-[#233F5F] rounded-xl flex items-center justify-center",children:e.jsx(ue,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-slate-900",children:"My Portfolio"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Welcome, ",b.user.firstName]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[y&&e.jsxs("a",{href:`https://${y.hostname}`,target:"_blank",rel:"noopener noreferrer",className:"hidden md:flex items-center gap-2 text-sm text-slate-600 hover:text-slate-900",children:[e.jsx(he,{className:"w-4 h-4"}),y.hostname,e.jsx(U,{className:"w-3 h-3"})]}),e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>ws.mutate(),className:"text-slate-600 hover:text-slate-900","data-testid":"button-logout",children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8 space-y-8",children:[n!=null&&n.openalexId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(d,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Publications"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:((is=N==null?void 0:N.works_count)==null?void 0:is.toLocaleString())||"—"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Q,{className:"w-6 h-6 text-blue-600"})})]})})}),e.jsx(d,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Citations"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:((ns=N==null?void 0:N.cited_by_count)==null?void 0:ns.toLocaleString())||"—"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(Is,{className:"w-6 h-6 text-green-600"})})]})})}),e.jsx(d,{children:e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:(o==null?void 0:o.status)==="active"?e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-lg font-medium text-green-600",children:"Live"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Rs,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-lg font-medium text-yellow-600",children:"Pending"})]})})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(Ys,{className:"w-6 h-6 text-purple-600"})})]})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(F,{className:"bg-slate-100 text-slate-700",children:["OpenAlex: ",n.openalexId]}),n.lastSyncedAt&&e.jsxs("span",{className:"text-sm text-slate-500",children:["Last synced: ",new Date(n.lastSyncedAt).toLocaleDateString()]})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>P.mutate(),disabled:P.isPending,"data-testid":"button-sync",children:[e.jsx(pe,{className:`w-4 h-4 mr-2 ${P.isPending?"animate-spin":""}`}),"Refresh Data"]})]})]}):e.jsxs(d,{className:"border-orange-200 bg-orange-50",children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(Es,{className:"w-5 h-5"}),"Connect Your OpenAlex Profile"]}),e.jsx(j,{className:"text-orange-700",children:"Enter your OpenAlex author ID to automatically import your publications, metrics, and research topics."})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{value:v,onChange:s=>J(s.target.value),placeholder:"e.g., A5023888391",className:"flex-1","data-testid":"input-openalex-id"}),e.jsx(c,{onClick:()=>Y.mutate(v),disabled:!v||Y.isPending,className:"bg-orange-500 hover:bg-orange-600","data-testid":"button-verify-openalex",children:Y.isPending?"Checking...":"Connect"})]}),e.jsxs("p",{className:"text-sm text-orange-600",children:["Find your ID by searching your name on"," ",e.jsx("a",{href:"https://openalex.org/authors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"OpenAlex Authors"})]})]})]}),e.jsxs(Ls,{defaultValue:"profile",className:"w-full",children:[e.jsxs(Ms,{className:"flex flex-wrap justify-start gap-1 w-full lg:grid lg:grid-cols-6 lg:w-[720px] h-auto p-1",children:[e.jsxs(A,{value:"profile","data-testid":"tab-profile",className:"flex-1 min-w-[80px] text-xs sm:text-sm",children:[e.jsx(ue,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),e.jsxs(A,{value:"publications","data-testid":"tab-publications",className:"flex-1 min-w-[80px] text-xs sm:text-sm",children:[e.jsx(Q,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Publications"})]}),e.jsxs(A,{value:"sections","data-testid":"tab-sections",className:"flex-1 min-w-[80px] text-xs sm:text-sm",children:[e.jsx(C,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sections"})]}),e.jsxs(A,{value:"sync","data-testid":"tab-sync",className:"flex-1 min-w-[80px] text-xs sm:text-sm",children:[e.jsx(fe,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sync"})]}),e.jsxs(A,{value:"social","data-testid":"tab-social",className:"flex-1 min-w-[80px] text-xs sm:text-sm",children:[e.jsx(he,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Social"})]}),e.jsxs(A,{value:"settings","data-testid":"tab-settings",className:"flex-1 min-w-[80px] text-xs sm:text-sm",children:[e.jsx(Vs,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]}),e.jsxs(T,{value:"profile",className:"mt-6 space-y-6",children:[e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Profile Photo"}),e.jsx(j,{children:"Upload a professional photo to personalize your portfolio"})]}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[n!=null&&n.profileImageUrl?e.jsx("img",{src:n.profileImageUrl,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-slate-100"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#0B1F3A] to-[#233F5F] flex items-center justify-center",children:e.jsx(ue,{className:"w-10 h-10 text-white"})}),e.jsx("button",{onClick:()=>{var s;return(s=Z.current)==null?void 0:s.click()},disabled:K.isPending,className:"absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center border border-slate-200 hover:bg-slate-50 transition-colors","data-testid":"button-change-photo",children:e.jsx(Qs,{className:"w-4 h-4 text-slate-600"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:Z,type:"file",accept:"image/*",onChange:Cs,className:"hidden","data-testid":"input-photo-file"}),e.jsxs(c,{variant:"outline",onClick:()=>{var s;return(s=Z.current)==null?void 0:s.click()},disabled:K.isPending,"data-testid":"button-upload-photo",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),K.isPending?"Uploading...":"Upload Photo"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"JPG, PNG or GIF. Max 5MB."})]})]})})]}),e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Profile Information"}),e.jsx(j,{children:"Customize how your name and biography appear on your portfolio"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Display Name"}),e.jsx(x,{value:ve,onChange:s=>be(s.target.value),placeholder:(N==null?void 0:N.display_name)||"Your Name","data-testid":"input-display-name"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Leave blank to use your name from OpenAlex"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Professional Title"}),e.jsx(x,{value:we,onChange:s=>Ce(s.target.value),placeholder:"e.g., Associate Professor of Computer Science","data-testid":"input-title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Biography"}),e.jsx(hs,{value:Se,onChange:s=>Pe(s.target.value),placeholder:"Tell visitors about your research interests, background, and achievements...",className:"min-h-[150px]","data-testid":"input-bio"})]}),e.jsxs(c,{onClick:He,disabled:z,className:"bg-[#0B1F3A] hover:bg-[#1a3a5c]","data-testid":"button-save-profile",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),z?"Saving...":"Save Changes"]})]})]})]}),e.jsx(T,{value:"publications",className:"mt-6 space-y-6",children:e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5 text-yellow-500"}),"Featured Publications"]}),e.jsx(j,{children:"Mark publications as featured to highlight them on your portfolio. Featured publications appear prominently at the top of your publications list."})]}),e.jsx(m,{children:(os=(cs=r==null?void 0:r.tenant)==null?void 0:cs.profile)!=null&&os.openalexId?(ds=S==null?void 0:S.publications)!=null&&ds.length?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500 pb-2 border-b",children:[e.jsxs("span",{children:[S.publications.filter(s=>s.isFeatured).length," featured"]}),e.jsxs("span",{children:[S.publications.length," total publications"]})]}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto space-y-2",children:S.publications.map(s=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border transition-colors ${s.isFeatured?"bg-yellow-50 border-yellow-200":"bg-white border-slate-200 hover:border-slate-300"}`,children:[e.jsx("button",{onClick:()=>_e.mutate({publicationId:s.id,isFeatured:!s.isFeatured}),className:`mt-1 transition-colors ${s.isFeatured?"text-yellow-500":"text-slate-300 hover:text-yellow-400"}`,disabled:_e.isPending,children:e.jsx(us,{className:`w-5 h-5 ${s.isFeatured?"fill-current":""}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm text-slate-900 line-clamp-2",children:s.title}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.journal&&e.jsx("span",{children:s.journal}),s.publicationYear&&e.jsxs("span",{children:[" • ",s.publicationYear]}),s.citationCount>0&&e.jsxs("span",{children:[" • ",s.citationCount," citations"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.isOpenAccess&&e.jsx(F,{variant:"outline",className:"text-green-600 border-green-300 text-xs",children:"Open Access"}),s.doi&&e.jsxs("a",{href:`https://doi.org/${s.doi}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),"DOI"]}),s.pdfUrl?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("a",{href:s.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 hover:underline flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),"PDF"]}),e.jsx("button",{onClick:async()=>{if(confirm("Remove the uploaded PDF?"))try{await f("DELETE",`/api/researcher/publications/${s.id}/pdf`),a({title:"PDF removed",description:"Publication PDF has been deleted."}),g.invalidateQueries({queryKey:["/api/researcher/publications"]})}catch{a({title:"Error",description:"Failed to remove PDF",variant:"destructive"})}},className:"text-xs text-red-500 hover:text-red-700",title:"Remove PDF",children:e.jsx(ge,{className:"w-3 h-3"})})]}):e.jsxs("label",{className:"text-xs text-slate-500 hover:text-blue-600 cursor-pointer flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"}),"Upload PDF",e.jsx("input",{type:"file",accept:".pdf",className:"hidden",onChange:async t=>{var k;const l=(k=t.target.files)==null?void 0:k[0];if(l){if(l.size>20*1024*1024){a({title:"File too large",description:"PDF must be under 20MB",variant:"destructive"});return}try{const xe=new FormData;if(xe.append("pdf",l),!(await fetch(`/api/researcher/publications/${s.id}/pdf`,{method:"POST",body:xe,credentials:"include"})).ok)throw new Error("Upload failed");a({title:"PDF uploaded",description:"Publication PDF has been saved."}),g.invalidateQueries({queryKey:["/api/researcher/publications"]})}catch{a({title:"Error",description:"Failed to upload PDF",variant:"destructive"})}t.target.value=""}}})]})]})]})]},s.id))})]}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No publications found. Try syncing your profile."}),e.jsxs(c,{onClick:()=>P.mutate(),variant:"outline",className:"mt-4",disabled:P.isPending,children:[e.jsx(pe,{className:`w-4 h-4 mr-2 ${P.isPending?"animate-spin":""}`}),"Sync Now"]})]}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Connect your OpenAlex ID to manage publications"})]})})]})}),e.jsx(T,{value:"sections",className:"mt-6 space-y-6",children:e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-500"}),"Content Sections"]}),e.jsx(j,{children:"Add custom sections to your portfolio such as Research Interests, Awards, Teaching, or any other content you want to showcase."})]}),e.jsxs(m,{children:[e.jsxs("div",{className:"space-y-4 pb-6 border-b",children:[e.jsx("h4",{className:"font-medium text-sm text-slate-900",children:ne?"Edit Section":"Add New Section"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Section Title"}),e.jsx(x,{value:O,onChange:s=>L(s.target.value),placeholder:"e.g., Research Interests, Awards, Teaching"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Section Type"}),e.jsxs("select",{value:De,onChange:s=>B(s.target.value),className:"w-full h-10 px-3 rounded-md border border-slate-200 bg-white text-sm",children:[e.jsx("option",{value:"custom",children:"Custom"}),e.jsx("option",{value:"research_interests",children:"Research Interests"}),e.jsx("option",{value:"awards",children:"Awards & Honors"}),e.jsx("option",{value:"teaching",children:"Teaching"}),e.jsx("option",{value:"grants",children:"Grants & Funding"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Content"}),e.jsx(hs,{value:M,onChange:s=>q(s.target.value),placeholder:"Enter your content here. You can use markdown for formatting...",className:"min-h-[120px]"})]}),e.jsx("div",{className:"flex gap-2",children:ne?e.jsxs(e.Fragment,{children:[e.jsxs(c,{onClick:()=>{me.mutate({id:ne,title:O,content:M})},disabled:!O||!M||me.isPending,className:"bg-[#0B1F3A] hover:bg-[#1a3a5c]",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Save Changes"]}),e.jsx(c,{variant:"outline",onClick:()=>{ce(null),L(""),q(""),B("custom")},children:"Cancel"})]}):e.jsxs(c,{onClick:()=>{Ge.mutate({title:O,content:M,sectionType:De})},disabled:!O||!M||Ge.isPending,className:"bg-[#0B1F3A] hover:bg-[#1a3a5c]",children:[e.jsx(zs,{className:"w-4 h-4 mr-2"}),"Add Section"]})})]}),e.jsxs("div",{className:"pt-6 space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm text-slate-900",children:"Your Sections"}),(ms=D==null?void 0:D.sections)!=null&&ms.length?e.jsx("div",{className:"space-y-2",children:D.sections.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border bg-white border-slate-200",children:[e.jsx(Gs,{className:"w-4 h-4 mt-1 text-slate-400 cursor-move"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h5",{className:"font-medium text-slate-900",children:s.title}),e.jsx(F,{variant:"outline",className:"text-xs",children:s.sectionType}),!s.isVisible&&e.jsx(F,{variant:"outline",className:"text-xs text-orange-600 border-orange-300",children:"Hidden"})]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 line-clamp-2",children:s.content})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>{ce(s.id),L(s.title),q(s.content),B(s.sectionType)},children:e.jsx(Hs,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>{me.mutate({id:s.id,isVisible:!s.isVisible})},children:s.isVisible?e.jsx(W,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>{confirm("Are you sure you want to delete this section?")&&As.mutate(s.id)},children:e.jsx(ge,{className:"w-4 h-4"})})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(C,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No custom sections yet. Add one above!"})]})]})]})]})}),e.jsx(T,{value:"sync",className:"mt-6 space-y-6",children:e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"}),"OpenAlex Sync Management"]}),e.jsx(j,{children:"View sync history and manually trigger data synchronization from OpenAlex"})]}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900",children:"Sync Publications"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Fetch latest publications and citations from OpenAlex"})]}),e.jsxs(c,{onClick:async()=>{try{if((await fetch("/api/researcher/sync",{method:"POST",credentials:"include"})).ok)a({title:"Sync started",description:"Your publications are being synced from OpenAlex"}),bs();else throw new Error("Failed to start sync")}catch{a({title:"Sync failed",description:"Could not start sync. Please try again.",variant:"destructive"})}},children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Sync Now"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Sync History"}),!(R!=null&&R.logs)||R.logs.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 rounded-lg border border-dashed",children:[e.jsx(fe,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No sync history yet"}),e.jsx("p",{className:"text-sm",children:'Click "Sync Now" to fetch your latest publications'})]}):e.jsx("div",{className:"space-y-3",children:R.logs.map(s=>e.jsxs("div",{className:`p-4 rounded-lg border ${s.status==="completed"?"bg-green-50 border-green-200":s.status==="failed"?"bg-red-50 border-red-200":s.status==="in_progress"?"bg-blue-50 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="completed"&&e.jsx(_s,{className:"w-5 h-5 text-green-600"}),s.status==="failed"&&e.jsx(Bs,{className:"w-5 h-5 text-red-600"}),s.status==="in_progress"&&e.jsx(js,{className:"w-5 h-5 text-blue-600 animate-pulse"}),s.status==="pending"&&e.jsx(js,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-slate-900 capitalize",children:[s.syncType.replace("_"," ")," Sync"]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Started: ",new Date(s.startedAt).toLocaleString()]})]})]}),e.jsx(F,{variant:"outline",className:`${s.status==="completed"?"text-green-700 border-green-300":s.status==="failed"?"text-red-700 border-red-300":s.status==="in_progress"?"text-blue-700 border-blue-300":"text-slate-700 border-slate-300"}`,children:s.status})]}),s.itemsProcessed!==null&&e.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:["Processed: ",s.itemsProcessed,s.itemsTotal?` / ${s.itemsTotal}`:""," items"]}),s.errorMessage&&e.jsxs("p",{className:"text-sm text-red-600 mt-2",children:["Error: ",s.errorMessage]}),s.completedAt&&e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Completed: ",new Date(s.completedAt).toLocaleString()]})]},s.id))})]})]})]})}),e.jsx(T,{value:"social",className:"mt-6 space-y-6",children:e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Social Links"}),e.jsx(j,{children:"Add links to your other profiles and websites"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Personal Website"}),e.jsx(x,{value:ke,onChange:s=>Fe(s.target.value),placeholder:"https://yourwebsite.com",type:"url","data-testid":"input-website"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Twitter / X"}),e.jsx(x,{value:Ae,onChange:s=>Te(s.target.value),placeholder:"https://twitter.com/yourusername",type:"url","data-testid":"input-twitter"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"LinkedIn"}),e.jsx(x,{value:Ue,onChange:s=>Ee(s.target.value),placeholder:"https://linkedin.com/in/yourusername",type:"url","data-testid":"input-linkedin"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Google Scholar"}),e.jsx(x,{value:Ie,onChange:s=>Oe(s.target.value),placeholder:"https://scholar.google.com/citations?user=...",type:"url","data-testid":"input-google-scholar"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"ORCID"}),e.jsx(x,{value:Le,onChange:s=>Me(s.target.value),placeholder:"https://orcid.org/0000-0000-0000-0000",type:"url","data-testid":"input-orcid"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"ResearchGate"}),e.jsx(x,{value:qe,onChange:s=>$e(s.target.value),placeholder:"https://www.researchgate.net/profile/Your-Name",type:"url","data-testid":"input-researchgate"})]}),e.jsxs(c,{onClick:He,disabled:z,className:"bg-[#0B1F3A] hover:bg-[#1a3a5c]","data-testid":"button-save-social",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),z?"Saving...":"Save Changes"]})]})]})}),e.jsxs(T,{value:"settings",className:"mt-6 space-y-6",children:[e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[ee?e.jsx(W,{className:"w-5 h-5 text-green-600"}):e.jsx(X,{className:"w-5 h-5 text-slate-400"}),"Profile Visibility"]}),e.jsx(j,{children:"Control who can see your research portfolio"})]}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(H,{htmlFor:"profile-visibility",className:"text-base font-medium",children:"Public Profile"}),e.jsx("p",{className:"text-sm text-slate-500",children:ee?"Your portfolio is visible to everyone on the internet":"Your portfolio is hidden from public view"})]}),e.jsx(Os,{id:"profile-visibility",checked:ee,onCheckedChange:ks,disabled:V.isPending})]})})]}),e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5"}),"CV / Resume"]}),e.jsx(j,{children:"Upload your CV to allow visitors to download it from your portfolio"})]}),e.jsx(m,{className:"space-y-4",children:n!=null&&n.cvUrl?e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(C,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-green-800",children:"CV Uploaded"}),e.jsx("p",{className:"text-sm text-green-600",children:"Your CV is available for download on your portfolio"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("a",{href:n.cvUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700",children:[e.jsx(U,{className:"w-3 h-3"}),"View"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Qe.mutate(),disabled:Qe.isPending,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ge,{className:"w-4 h-4"})})]})]}):e.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-lg p-6 text-center",children:[e.jsx(C,{className:"w-10 h-10 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 mb-3",children:"No CV uploaded yet"}),e.jsx("input",{ref:Ve,type:"file",accept:".pdf,.doc,.docx",onChange:Ss,className:"hidden"}),e.jsxs(c,{variant:"outline",onClick:()=>{var s;return(s=Ve.current)==null?void 0:s.click()},disabled:oe.isPending,children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),oe.isPending?"Uploading...":"Upload CV"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"PDF, DOC, or DOCX. Max 10MB."})]})})]}),e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-5 h-5"}),"Portfolio Theme"]}),e.jsx(j,{children:"Choose a color theme for your research portfolio"})]}),e.jsxs(m,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:$==null?void 0:$.filter(s=>s.isActive).map(s=>{const t=s.config,l=gs===s.id;return e.jsxs("button",{onClick:()=>Fs(s.id),className:`relative p-4 rounded-lg border-2 transition-all ${l?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border border-slate-200",style:{backgroundColor:t.colors.primary}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-slate-200",style:{backgroundColor:t.colors.accent}})]}),e.jsx("p",{className:"text-sm font-medium text-left",children:s.name}),l&&e.jsx(ps,{className:"absolute top-2 right-2 w-5 h-5 text-blue-500"})]},s.id)})}),(!$||$.length===0)&&e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No themes available. Contact your administrator."})]})]}),e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsx(u,{children:"Account Settings"}),e.jsx(j,{children:"Manage your account and portfolio settings"})]}),e.jsxs(m,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Preview Portfolio"}),n!=null&&n.openalexId?e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx(U,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:"See how visitors will view your portfolio"}),e.jsxs("a",{href:`/researcher/${n.openalexId}`,target:"_blank",rel:"noopener noreferrer",className:"ml-auto bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-medium hover:bg-blue-700 flex items-center gap-1","data-testid":"link-preview-portfolio",children:["Preview",e.jsx(U,{className:"w-3 h-3"})]})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"Connect your OpenAlex ID to preview your portfolio"})]}),e.jsx(G,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"QR Code"}),n!=null&&n.openalexId?e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 rounded-lg border border-purple-100",children:[e.jsx(qs,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"text-sm text-purple-700",children:"Download a QR code linking to your portfolio"}),e.jsxs("a",{href:`/api/researcher/${n.openalexId}/qr-code${y?`?url=https://${y.hostname}`:""}`,download:`${n.displayName||"portfolio"}-qr-code.png`,className:"ml-auto bg-purple-600 text-white px-3 py-1.5 rounded-md text-sm font-medium hover:bg-purple-700 flex items-center gap-1","data-testid":"link-download-qr",children:[e.jsx(Ks,{className:"w-3 h-3"}),"Download QR"]})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"Connect your OpenAlex ID to generate a QR code"})]}),e.jsx(G,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Your Domain"}),y?e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-lg",children:[e.jsx(he,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"font-medium",children:y.hostname}),e.jsxs("a",{href:`https://${y.hostname}`,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm",children:["Visit Site",e.jsx(U,{className:"w-3 h-3"})]})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"Your domain will be assigned by the administrator"})]}),e.jsx(G,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Plan"}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-lg",children:[e.jsx(F,{className:"capitalize",children:o==null?void 0:o.plan}),e.jsx("span",{className:"text-sm text-slate-500",children:"Contact support to change your plan"})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700",children:"OpenAlex ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{value:v,onChange:s=>J(s.target.value),placeholder:"e.g., A5023888391",className:"flex-1","data-testid":"input-change-openalex-id"}),e.jsx(c,{variant:"outline",onClick:()=>Y.mutate(v),disabled:!v||Y.isPending,"data-testid":"button-update-openalex",children:"Update"})]})]})]})]}),e.jsxs(d,{children:[e.jsxs(p,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"Change Password"]}),e.jsx(j,{children:"Update your account password"})]}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"current-password",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"current-password",type:le?"text":"password",value:ae,onChange:s=>Ye(s.target.value),placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>fs(!le),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:le?e.jsx(X,{className:"w-4 h-4"}):e.jsx(W,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"new-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"new-password",type:ie?"text":"password",value:I,onChange:s=>ze(s.target.value),placeholder:"Enter new password (min. 8 characters)"}),e.jsx("button",{type:"button",onClick:()=>Ns(!ie),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:ie?e.jsx(X,{className:"w-4 h-4"}):e.jsx(W,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsx(x,{id:"confirm-password",type:"password",value:re,onChange:s=>Be(s.target.value),placeholder:"Confirm new password"})]}),e.jsxs(c,{onClick:Ps,disabled:!ae||!I||!re||de.isPending,className:"bg-[#0B1F3A] hover:bg-[#1a3a5c]",children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),de.isPending?"Updating...":"Update Password"]})]})]})]})]})]})]})}export{St as default};
