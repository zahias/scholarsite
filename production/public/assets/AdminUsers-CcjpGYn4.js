import{j as e,u as lt,b as ve}from"./vendor-query-CD7Z7DR7.js";import{r as n}from"./vendor-react-DHpf67ko.js";import{c as Te,h as M,Z as js,a as xt,z as ft,D as Ns,d as Ae,u as le,b as v,E as ys,H as Ms,P as re,_ as gt,J as Cs,$ as vt,a0 as Rs,O as Ss,K as _s,N as Ps,g as Es,w as Ds,i as Is,j as Ts,L as As,B as E,U as Ge,I as K,C as te,k as se,a1 as ks,q as dt,v as Os,W as we,Q as $e}from"./index-ADePB-jF.js";import{S as Ls}from"./skeleton-BxqIcbk8.js";import{L as A}from"./label-DIPmLK6W.js";import{D as be,a as Fs,b as je,c as Ne,d as ye,i as Me,j as Ce}from"./dialog-WwBiQRpy.js";import{S as Re,a as Se,b as _e,c as Pe,d as k}from"./select-DP3uqzmb.js";import{u as Us}from"./index-B1CoDt99.js";import{h as Ks,u as Gs,F as $s,R as Bs}from"./Combination-CGLXVail.js";import{c as wt,R as Vs,I as zs}from"./index-DbRr6nNw.js";import{u as ut}from"./index-kJK_MUWg.js";import{C as Hs}from"./chevron-right-n4THzZXR.js";import{C as qs}from"./circle-nFrypB3B.js";import{A as Ys}from"./arrow-left-L7GaZ0XB.js";import{S as mt}from"./shield-CW60-gKU.js";import{U as pt}from"./user-X63Yn1rZ.js";import{C as Xs}from"./circle-check-big-Jef9LLdC.js";import{T as Qs}from"./trash-2-CSzINrwM.js";import"./vendor-charts-4dyn6-nb.js";import"./chevron-up-oOAvqpdg.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Te("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Te("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),bt=n.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:M("w-full caption-bottom text-sm",t),...r})}));bt.displayName="Table";const jt=n.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:M("[&_tr]:border-b",t),...r}));jt.displayName="TableHeader";const Nt=n.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:M("[&_tr:last-child]:border-0",t),...r}));Nt.displayName="TableBody";const tr=n.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:M("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));tr.displayName="TableFooter";const Be=n.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:M("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));Be.displayName="TableRow";const H=n.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:M("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));H.displayName="TableHead";const q=n.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:M("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));q.displayName="TableCell";const sr=n.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:M("mt-4 text-sm text-muted-foreground",t),...r}));sr.displayName="TableCaption";var Ve=["Enter"," "],rr=["ArrowDown","PageUp","Home"],yt=["ArrowUp","PageDown","End"],nr=[...rr,...yt],ar={ltr:[...Ve,"ArrowRight"],rtl:[...Ve,"ArrowLeft"]},or={ltr:["ArrowLeft"],rtl:["ArrowRight"]},de="Menu",[ce,cr,ir]=js(de),[Y,Mt]=xt(de,[ir,ft,wt]),ke=ft(),Ct=wt(),[lr,X]=Y(de),[dr,ue]=Y(de),Rt=t=>{const{__scopeMenu:r,open:s=!1,children:a,dir:o,onOpenChange:i,modal:d=!0}=t,m=ke(r),[x,f]=n.useState(null),p=n.useRef(!1),l=gt(i),h=Us(o);return n.useEffect(()=>{const j=()=>{p.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>p.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),e.jsx(Ss,{...m,children:e.jsx(lr,{scope:r,open:s,onOpenChange:l,content:x,onContentChange:f,children:e.jsx(dr,{scope:r,onClose:n.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:p,dir:h,modal:d,children:a})})})};Rt.displayName=de;var ur="MenuAnchor",ze=n.forwardRef((t,r)=>{const{__scopeMenu:s,...a}=t,o=ke(s);return e.jsx(Ns,{...o,...a,ref:r})});ze.displayName=ur;var He="MenuPortal",[mr,St]=Y(He,{forceMount:void 0}),_t=t=>{const{__scopeMenu:r,forceMount:s,children:a,container:o}=t,i=X(He,r);return e.jsx(mr,{scope:r,forceMount:s,children:e.jsx(Ae,{present:s||i.open,children:e.jsx(_s,{asChild:!0,container:o,children:a})})})};_t.displayName=He;var P="MenuContent",[pr,qe]=Y(P),Pt=n.forwardRef((t,r)=>{const s=St(P,t.__scopeMenu),{forceMount:a=s.forceMount,...o}=t,i=X(P,t.__scopeMenu),d=ue(P,t.__scopeMenu);return e.jsx(ce.Provider,{scope:t.__scopeMenu,children:e.jsx(Ae,{present:a||i.open,children:e.jsx(ce.Slot,{scope:t.__scopeMenu,children:d.modal?e.jsx(hr,{...o,ref:r}):e.jsx(xr,{...o,ref:r})})})})}),hr=n.forwardRef((t,r)=>{const s=X(P,t.__scopeMenu),a=n.useRef(null),o=le(r,a);return n.useEffect(()=>{const i=a.current;if(i)return Ks(i)},[]),e.jsx(Ye,{...t,ref:o,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:v(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),xr=n.forwardRef((t,r)=>{const s=X(P,t.__scopeMenu);return e.jsx(Ye,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),fr=Ps("MenuContent.ScrollLock"),Ye=n.forwardRef((t,r)=>{const{__scopeMenu:s,loop:a=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:d,disableOutsidePointerEvents:m,onEntryFocus:x,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:l,onInteractOutside:h,onDismiss:j,disableOutsideScroll:w,...D}=t,O=X(P,s),F=ue(P,s),G=ke(s),$=Ct(s),me=cr(s),[Q,N]=n.useState(null),B=n.useRef(null),pe=le(r,B,O.onContentChange),V=n.useRef(0),z=n.useRef(""),he=n.useRef(0),W=n.useRef(null),ne=n.useRef("right"),Z=n.useRef(0),xe=w?Bs:n.Fragment,Le=w?{as:fr,allowPinchZoom:!0}:void 0,J=u=>{var b,fe;const y=z.current+u,R=me().filter(S=>!S.disabled),I=document.activeElement,U=(b=R.find(S=>S.ref.current===I))==null?void 0:b.textValue,L=R.map(S=>S.textValue),ae=_r(L,y,U),g=(fe=R.find(S=>S.textValue===ae))==null?void 0:fe.ref.current;(function S(ee){z.current=ee,window.clearTimeout(V.current),ee!==""&&(V.current=window.setTimeout(()=>S(""),1e3))})(y),g&&setTimeout(()=>g.focus())};n.useEffect(()=>()=>window.clearTimeout(V.current),[]),Gs();const _=n.useCallback(u=>{var R,I;return ne.current===((R=W.current)==null?void 0:R.side)&&Er(u,(I=W.current)==null?void 0:I.area)},[]);return e.jsx(pr,{scope:s,searchRef:z,onItemEnter:n.useCallback(u=>{_(u)&&u.preventDefault()},[_]),onItemLeave:n.useCallback(u=>{var y;_(u)||((y=B.current)==null||y.focus(),N(null))},[_]),onTriggerLeave:n.useCallback(u=>{_(u)&&u.preventDefault()},[_]),pointerGraceTimerRef:he,onPointerGraceIntentChange:n.useCallback(u=>{W.current=u},[]),children:e.jsx(xe,{...Le,children:e.jsx($s,{asChild:!0,trapped:o,onMountAutoFocus:v(i,u=>{var y;u.preventDefault(),(y=B.current)==null||y.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(ys,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:l,onInteractOutside:h,onDismiss:j,children:e.jsx(Vs,{asChild:!0,...$,dir:F.dir,orientation:"vertical",loop:a,currentTabStopId:Q,onCurrentTabStopIdChange:N,onEntryFocus:v(x,u=>{F.isUsingKeyboardRef.current||u.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Ms,{role:"menu","aria-orientation":"vertical","data-state":zt(O.open),"data-radix-menu-content":"",dir:F.dir,...G,...D,ref:pe,style:{outline:"none",...D.style},onKeyDown:v(D.onKeyDown,u=>{const R=u.target.closest("[data-radix-menu-content]")===u.currentTarget,I=u.ctrlKey||u.altKey||u.metaKey,U=u.key.length===1;R&&(u.key==="Tab"&&u.preventDefault(),!I&&U&&J(u.key));const L=B.current;if(u.target!==L||!nr.includes(u.key))return;u.preventDefault();const g=me().filter(b=>!b.disabled).map(b=>b.ref.current);yt.includes(u.key)&&g.reverse(),Rr(g)}),onBlur:v(t.onBlur,u=>{u.currentTarget.contains(u.target)||(window.clearTimeout(V.current),z.current="")}),onPointerMove:v(t.onPointerMove,ie(u=>{const y=u.target,R=Z.current!==u.clientX;if(u.currentTarget.contains(y)&&R){const I=u.clientX>Z.current?"right":"left";ne.current=I,Z.current=u.clientX}}))})})})})})})});Pt.displayName=P;var gr="MenuGroup",Xe=n.forwardRef((t,r)=>{const{__scopeMenu:s,...a}=t;return e.jsx(re.div,{role:"group",...a,ref:r})});Xe.displayName=gr;var vr="MenuLabel",Et=n.forwardRef((t,r)=>{const{__scopeMenu:s,...a}=t;return e.jsx(re.div,{...a,ref:r})});Et.displayName=vr;var De="MenuItem",ht="menu.itemSelect",Oe=n.forwardRef((t,r)=>{const{disabled:s=!1,onSelect:a,...o}=t,i=n.useRef(null),d=ue(De,t.__scopeMenu),m=qe(De,t.__scopeMenu),x=le(r,i),f=n.useRef(!1),p=()=>{const l=i.current;if(!s&&l){const h=new CustomEvent(ht,{bubbles:!0,cancelable:!0});l.addEventListener(ht,j=>a==null?void 0:a(j),{once:!0}),Rs(l,h),h.defaultPrevented?f.current=!1:d.onClose()}};return e.jsx(Dt,{...o,ref:x,disabled:s,onClick:v(t.onClick,p),onPointerDown:l=>{var h;(h=t.onPointerDown)==null||h.call(t,l),f.current=!0},onPointerUp:v(t.onPointerUp,l=>{var h;f.current||(h=l.currentTarget)==null||h.click()}),onKeyDown:v(t.onKeyDown,l=>{const h=m.searchRef.current!=="";s||h&&l.key===" "||Ve.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});Oe.displayName=De;var Dt=n.forwardRef((t,r)=>{const{__scopeMenu:s,disabled:a=!1,textValue:o,...i}=t,d=qe(De,s),m=Ct(s),x=n.useRef(null),f=le(r,x),[p,l]=n.useState(!1),[h,j]=n.useState("");return n.useEffect(()=>{const w=x.current;w&&j((w.textContent??"").trim())},[i.children]),e.jsx(ce.ItemSlot,{scope:s,disabled:a,textValue:o??h,children:e.jsx(zs,{asChild:!0,...m,focusable:!a,children:e.jsx(re.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:f,onPointerMove:v(t.onPointerMove,ie(w=>{a?d.onItemLeave(w):(d.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:v(t.onPointerLeave,ie(w=>d.onItemLeave(w))),onFocus:v(t.onFocus,()=>l(!0)),onBlur:v(t.onBlur,()=>l(!1))})})})}),wr="MenuCheckboxItem",It=n.forwardRef((t,r)=>{const{checked:s=!1,onCheckedChange:a,...o}=t;return e.jsx(Lt,{scope:t.__scopeMenu,checked:s,children:e.jsx(Oe,{role:"menuitemcheckbox","aria-checked":Ie(s)?"mixed":s,...o,ref:r,"data-state":We(s),onSelect:v(o.onSelect,()=>a==null?void 0:a(Ie(s)?!0:!s),{checkForDefaultPrevented:!1})})})});It.displayName=wr;var Tt="MenuRadioGroup",[br,jr]=Y(Tt,{value:void 0,onValueChange:()=>{}}),At=n.forwardRef((t,r)=>{const{value:s,onValueChange:a,...o}=t,i=gt(a);return e.jsx(br,{scope:t.__scopeMenu,value:s,onValueChange:i,children:e.jsx(Xe,{...o,ref:r})})});At.displayName=Tt;var kt="MenuRadioItem",Ot=n.forwardRef((t,r)=>{const{value:s,...a}=t,o=jr(kt,t.__scopeMenu),i=s===o.value;return e.jsx(Lt,{scope:t.__scopeMenu,checked:i,children:e.jsx(Oe,{role:"menuitemradio","aria-checked":i,...a,ref:r,"data-state":We(i),onSelect:v(a.onSelect,()=>{var d;return(d=o.onValueChange)==null?void 0:d.call(o,s)},{checkForDefaultPrevented:!1})})})});Ot.displayName=kt;var Qe="MenuItemIndicator",[Lt,Nr]=Y(Qe,{checked:!1}),Ft=n.forwardRef((t,r)=>{const{__scopeMenu:s,forceMount:a,...o}=t,i=Nr(Qe,s);return e.jsx(Ae,{present:a||Ie(i.checked)||i.checked===!0,children:e.jsx(re.span,{...o,ref:r,"data-state":We(i.checked)})})});Ft.displayName=Qe;var yr="MenuSeparator",Ut=n.forwardRef((t,r)=>{const{__scopeMenu:s,...a}=t;return e.jsx(re.div,{role:"separator","aria-orientation":"horizontal",...a,ref:r})});Ut.displayName=yr;var Mr="MenuArrow",Kt=n.forwardRef((t,r)=>{const{__scopeMenu:s,...a}=t,o=ke(s);return e.jsx(Cs,{...o,...a,ref:r})});Kt.displayName=Mr;var Cr="MenuSub",[Kn,Gt]=Y(Cr),oe="MenuSubTrigger",$t=n.forwardRef((t,r)=>{const s=X(oe,t.__scopeMenu),a=ue(oe,t.__scopeMenu),o=Gt(oe,t.__scopeMenu),i=qe(oe,t.__scopeMenu),d=n.useRef(null),{pointerGraceTimerRef:m,onPointerGraceIntentChange:x}=i,f={__scopeMenu:t.__scopeMenu},p=n.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return n.useEffect(()=>p,[p]),n.useEffect(()=>{const l=m.current;return()=>{window.clearTimeout(l),x(null)}},[m,x]),e.jsx(ze,{asChild:!0,...f,children:e.jsx(Dt,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":o.contentId,"data-state":zt(s.open),...t,ref:vt(r,o.onTriggerChange),onClick:l=>{var h;(h=t.onClick)==null||h.call(t,l),!(t.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:v(t.onPointerMove,ie(l=>{i.onItemEnter(l),!l.defaultPrevented&&!t.disabled&&!s.open&&!d.current&&(i.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{s.onOpenChange(!0),p()},100))})),onPointerLeave:v(t.onPointerLeave,ie(l=>{var j,w;p();const h=(j=s.content)==null?void 0:j.getBoundingClientRect();if(h){const D=(w=s.content)==null?void 0:w.dataset.side,O=D==="right",F=O?-5:5,G=h[O?"left":"right"],$=h[O?"right":"left"];i.onPointerGraceIntentChange({area:[{x:l.clientX+F,y:l.clientY},{x:G,y:h.top},{x:$,y:h.top},{x:$,y:h.bottom},{x:G,y:h.bottom}],side:D}),window.clearTimeout(m.current),m.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(l),l.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:v(t.onKeyDown,l=>{var j;const h=i.searchRef.current!=="";t.disabled||h&&l.key===" "||ar[a.dir].includes(l.key)&&(s.onOpenChange(!0),(j=s.content)==null||j.focus(),l.preventDefault())})})})});$t.displayName=oe;var Bt="MenuSubContent",Vt=n.forwardRef((t,r)=>{const s=St(P,t.__scopeMenu),{forceMount:a=s.forceMount,...o}=t,i=X(P,t.__scopeMenu),d=ue(P,t.__scopeMenu),m=Gt(Bt,t.__scopeMenu),x=n.useRef(null),f=le(r,x);return e.jsx(ce.Provider,{scope:t.__scopeMenu,children:e.jsx(Ae,{present:a||i.open,children:e.jsx(ce.Slot,{scope:t.__scopeMenu,children:e.jsx(Ye,{id:m.contentId,"aria-labelledby":m.triggerId,...o,ref:f,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var l;d.isUsingKeyboardRef.current&&((l=x.current)==null||l.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:v(t.onFocusOutside,p=>{p.target!==m.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:v(t.onEscapeKeyDown,p=>{d.onClose(),p.preventDefault()}),onKeyDown:v(t.onKeyDown,p=>{var j;const l=p.currentTarget.contains(p.target),h=or[d.dir].includes(p.key);l&&h&&(i.onOpenChange(!1),(j=m.trigger)==null||j.focus(),p.preventDefault())})})})})})});Vt.displayName=Bt;function zt(t){return t?"open":"closed"}function Ie(t){return t==="indeterminate"}function We(t){return Ie(t)?"indeterminate":t?"checked":"unchecked"}function Rr(t){const r=document.activeElement;for(const s of t)if(s===r||(s.focus(),document.activeElement!==r))return}function Sr(t,r){return t.map((s,a)=>t[(r+a)%t.length])}function _r(t,r,s){const o=r.length>1&&Array.from(r).every(f=>f===r[0])?r[0]:r,i=s?t.indexOf(s):-1;let d=Sr(t,Math.max(i,0));o.length===1&&(d=d.filter(f=>f!==s));const x=d.find(f=>f.toLowerCase().startsWith(o.toLowerCase()));return x!==s?x:void 0}function Pr(t,r){const{x:s,y:a}=t;let o=!1;for(let i=0,d=r.length-1;i<r.length;d=i++){const m=r[i].x,x=r[i].y,f=r[d].x,p=r[d].y;x>a!=p>a&&s<(f-m)*(a-x)/(p-x)+m&&(o=!o)}return o}function Er(t,r){if(!r)return!1;const s={x:t.clientX,y:t.clientY};return Pr(s,r)}function ie(t){return r=>r.pointerType==="mouse"?t(r):void 0}var Dr=Rt,Ir=ze,Tr=_t,Ar=Pt,kr=Xe,Or=Et,Lr=Oe,Fr=It,Ur=At,Kr=Ot,Gr=Ft,$r=Ut,Br=Kt,Vr=$t,zr=Vt,Ze="DropdownMenu",[Hr,Gn]=xt(Ze,[Mt]),C=Mt(),[qr,Ht]=Hr(Ze),qt=t=>{const{__scopeDropdownMenu:r,children:s,dir:a,open:o,defaultOpen:i,onOpenChange:d,modal:m=!0}=t,x=C(r),f=n.useRef(null),[p=!1,l]=Es({prop:o,defaultProp:i,onChange:d});return e.jsx(qr,{scope:r,triggerId:ut(),triggerRef:f,contentId:ut(),open:p,onOpenChange:l,onOpenToggle:n.useCallback(()=>l(h=>!h),[l]),modal:m,children:e.jsx(Dr,{...x,open:p,onOpenChange:l,dir:a,modal:m,children:s})})};qt.displayName=Ze;var Yt="DropdownMenuTrigger",Xt=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,disabled:a=!1,...o}=t,i=Ht(Yt,s),d=C(s);return e.jsx(Ir,{asChild:!0,...d,children:e.jsx(re.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":a?"":void 0,disabled:a,...o,ref:vt(r,i.triggerRef),onPointerDown:v(t.onPointerDown,m=>{!a&&m.button===0&&m.ctrlKey===!1&&(i.onOpenToggle(),i.open||m.preventDefault())}),onKeyDown:v(t.onKeyDown,m=>{a||(["Enter"," "].includes(m.key)&&i.onOpenToggle(),m.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(m.key)&&m.preventDefault())})})})});Xt.displayName=Yt;var Yr="DropdownMenuPortal",Qt=t=>{const{__scopeDropdownMenu:r,...s}=t,a=C(r);return e.jsx(Tr,{...a,...s})};Qt.displayName=Yr;var Wt="DropdownMenuContent",Zt=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=Ht(Wt,s),i=C(s),d=n.useRef(!1);return e.jsx(Ar,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...a,ref:r,onCloseAutoFocus:v(t.onCloseAutoFocus,m=>{var x;d.current||(x=o.triggerRef.current)==null||x.focus(),d.current=!1,m.preventDefault()}),onInteractOutside:v(t.onInteractOutside,m=>{const x=m.detail.originalEvent,f=x.button===0&&x.ctrlKey===!0,p=x.button===2||f;(!o.modal||p)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zt.displayName=Wt;var Xr="DropdownMenuGroup",Qr=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(kr,{...o,...a,ref:r})});Qr.displayName=Xr;var Wr="DropdownMenuLabel",Jt=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Or,{...o,...a,ref:r})});Jt.displayName=Wr;var Zr="DropdownMenuItem",es=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Lr,{...o,...a,ref:r})});es.displayName=Zr;var Jr="DropdownMenuCheckboxItem",ts=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Fr,{...o,...a,ref:r})});ts.displayName=Jr;var en="DropdownMenuRadioGroup",tn=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Ur,{...o,...a,ref:r})});tn.displayName=en;var sn="DropdownMenuRadioItem",ss=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Kr,{...o,...a,ref:r})});ss.displayName=sn;var rn="DropdownMenuItemIndicator",rs=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Gr,{...o,...a,ref:r})});rs.displayName=rn;var nn="DropdownMenuSeparator",ns=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx($r,{...o,...a,ref:r})});ns.displayName=nn;var an="DropdownMenuArrow",on=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Br,{...o,...a,ref:r})});on.displayName=an;var cn="DropdownMenuSubTrigger",as=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(Vr,{...o,...a,ref:r})});as.displayName=cn;var ln="DropdownMenuSubContent",os=n.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...a}=t,o=C(s);return e.jsx(zr,{...o,...a,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});os.displayName=ln;var dn=qt,un=Xt,mn=Qt,cs=Zt,is=Jt,ls=es,ds=ts,us=ss,ms=rs,ps=ns,hs=as,xs=os;const pn=dn,hn=un,xn=n.forwardRef(({className:t,inset:r,children:s,...a},o)=>e.jsxs(hs,{ref:o,className:M("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...a,children:[s,e.jsx(Hs,{className:"ml-auto"})]}));xn.displayName=hs.displayName;const fn=n.forwardRef(({className:t,...r},s)=>e.jsx(xs,{ref:s,className:M("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r}));fn.displayName=xs.displayName;const fs=n.forwardRef(({className:t,sideOffset:r=4,...s},a)=>e.jsx(mn,{children:e.jsx(cs,{ref:a,sideOffset:r,className:M("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s})}));fs.displayName=cs.displayName;const Ee=n.forwardRef(({className:t,inset:r,...s},a)=>e.jsx(ls,{ref:a,className:M("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...s}));Ee.displayName=ls.displayName;const gn=n.forwardRef(({className:t,children:r,checked:s,...a},o)=>e.jsxs(ds,{ref:o,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ms,{children:e.jsx(Ds,{className:"h-4 w-4"})})}),r]}));gn.displayName=ds.displayName;const vn=n.forwardRef(({className:t,children:r,...s},a)=>e.jsxs(us,{ref:a,className:M("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ms,{children:e.jsx(qs,{className:"h-2 w-2 fill-current"})})}),r]}));vn.displayName=us.displayName;const wn=n.forwardRef(({className:t,inset:r,...s},a)=>e.jsx(is,{ref:a,className:M("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...s}));wn.displayName=is.displayName;const gs=n.forwardRef(({className:t,...r},s)=>e.jsx(ps,{ref:s,className:M("-mx-1 my-1 h-px bg-muted",t),...r}));gs.displayName=ps.displayName;function $n(){var et,tt,st,rt,nt,at,ot;const[,t]=Is(),{toast:r}=Ts(),[s,a]=n.useState(""),[o,i]=n.useState("all"),[d,m]=n.useState("all"),[x,f]=n.useState(!1),[p,l]=n.useState(""),[h,j]=n.useState(""),[w,D]=n.useState(""),[O,F]=n.useState(""),[G,$]=n.useState("researcher"),[me,Q]=n.useState(!1),[N,B]=n.useState(null),[pe,V]=n.useState(""),[z,he]=n.useState(""),[W,ne]=n.useState("researcher"),[Z,xe]=n.useState(!0),[Le,J]=n.useState(!1),[_,u]=n.useState(null),[y,R]=n.useState(""),[I,U]=n.useState(!1),[L,ae]=n.useState(null),{data:g}=lt({queryKey:["/api/auth/me"]}),{data:b,isLoading:fe}=lt({queryKey:["/api/admin/users"],enabled:!!(g!=null&&g.user)}),S=ve({mutationFn:async c=>(await we("POST","/api/admin/users",c)).json(),onSuccess:()=>{r({title:"User Created",description:"The user has been created successfully."}),$e.invalidateQueries({queryKey:["/api/admin/users"]}),f(!1),vs()},onError:c=>{r({title:"Error",description:c.message,variant:"destructive"})}}),ee=ve({mutationFn:async({id:c,...T})=>(await we("PATCH",`/api/admin/users/${c}`,T)).json(),onSuccess:()=>{r({title:"User Updated",description:"The user has been updated successfully."}),$e.invalidateQueries({queryKey:["/api/admin/users"]}),Q(!1),B(null)},onError:c=>{r({title:"Error",description:c.message,variant:"destructive"})}}),Fe=ve({mutationFn:async({id:c,newPassword:T})=>(await we("POST",`/api/admin/users/${c}/reset-password`,{newPassword:T})).json(),onSuccess:()=>{r({title:"Password Reset",description:"The password has been reset successfully."}),J(!1),u(null),R("")},onError:c=>{r({title:"Error",description:c.message,variant:"destructive"})}}),Ue=ve({mutationFn:async c=>(await we("DELETE",`/api/admin/users/${c}`)).json(),onSuccess:()=>{r({title:"User Deleted",description:"The user has been deleted successfully."}),$e.invalidateQueries({queryKey:["/api/admin/users"]}),U(!1),ae(null)},onError:c=>{r({title:"Error",description:c.message,variant:"destructive"})}}),vs=()=>{l(""),j(""),D(""),F(""),$("researcher")},ws=c=>{B(c),V(c.firstName||""),he(c.lastName||""),ne(c.role),xe(c.isActive),Q(!0)},Je=((b==null?void 0:b.users)||[]).filter(c=>{var ct,it;const T=c.email.toLowerCase().includes(s.toLowerCase())||(((ct=c.firstName)==null?void 0:ct.toLowerCase())||"").includes(s.toLowerCase())||(((it=c.lastName)==null?void 0:it.toLowerCase())||"").includes(s.toLowerCase()),Ke=o==="all"||c.role===o,bs=d==="all"||d==="active"&&c.isActive||d==="inactive"&&!c.isActive;return T&&Ke&&bs}),ge={total:((et=b==null?void 0:b.users)==null?void 0:et.length)||0,admins:((tt=b==null?void 0:b.users)==null?void 0:tt.filter(c=>c.role==="admin").length)||0,researchers:((st=b==null?void 0:b.users)==null?void 0:st.filter(c=>c.role==="researcher").length)||0,active:((rt=b==null?void 0:b.users)==null?void 0:rt.filter(c=>c.isActive).length)||0};return!(g!=null&&g.user)||g.user.role!=="admin"?(t("/admin/login"),null):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[e.jsx("header",{className:"border-b border-white/10 bg-white/5 backdrop-blur-lg sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(As,{href:"/admin",children:e.jsx(E,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white hover:bg-white/10",children:e.jsx(Ys,{className:"w-5 h-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"User Management"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Manage platform users and permissions"})]})]}),e.jsxs(be,{open:x,onOpenChange:f,children:[e.jsx(Fs,{asChild:!0,children:e.jsxs(E,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(er,{className:"w-4 h-4 mr-2"}),"Add User"]})}),e.jsxs(je,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Create New User"}),e.jsx(Me,{className:"text-slate-400",children:"Add a new user to the platform"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"firstName",children:"First Name"}),e.jsx(K,{id:"firstName",value:w,onChange:c=>D(c.target.value),className:"bg-slate-700 border-slate-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"lastName",children:"Last Name"}),e.jsx(K,{id:"lastName",value:O,onChange:c=>F(c.target.value),className:"bg-slate-700 border-slate-600"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",type:"email",value:p,onChange:c=>l(c.target.value),className:"bg-slate-700 border-slate-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"password",children:"Password"}),e.jsx(K,{id:"password",type:"password",value:h,onChange:c=>j(c.target.value),placeholder:"Min 8 characters",className:"bg-slate-700 border-slate-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"role",children:"Role"}),e.jsxs(Re,{value:G,onValueChange:c=>$(c),children:[e.jsx(Se,{className:"bg-slate-700 border-slate-600",children:e.jsx(_e,{})}),e.jsxs(Pe,{className:"bg-slate-700 border-slate-600",children:[e.jsx(k,{value:"researcher",children:"Researcher"}),e.jsx(k,{value:"admin",children:"Admin"})]})]})]})]}),e.jsxs(Ce,{children:[e.jsx(E,{variant:"outline",onClick:()=>f(!1),className:"border-slate-600 text-slate-300",children:"Cancel"}),e.jsx(E,{onClick:()=>S.mutate({email:p,password:h,firstName:w,lastName:O,role:G}),disabled:!p||!h||h.length<8||S.isPending,className:"bg-blue-600 hover:bg-blue-700",children:S.isPending?"Creating...":"Create User"})]})]})]})]})}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(te,{className:"bg-white/5 border-white/10",children:e.jsx(se,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:ge.total}),e.jsx("p",{className:"text-xs text-slate-400",children:"Total Users"})]})]})})}),e.jsx(te,{className:"bg-white/5 border-white/10",children:e.jsx(se,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(mt,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:ge.admins}),e.jsx("p",{className:"text-xs text-slate-400",children:"Admins"})]})]})})}),e.jsx(te,{className:"bg-white/5 border-white/10",children:e.jsx(se,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/20 rounded-lg flex items-center justify-center",children:e.jsx(pt,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:ge.researchers}),e.jsx("p",{className:"text-xs text-slate-400",children:"Researchers"})]})]})})}),e.jsx(te,{className:"bg-white/5 border-white/10",children:e.jsx(se,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Xs,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:ge.active}),e.jsx("p",{className:"text-xs text-slate-400",children:"Active"})]})]})})})]}),e.jsx(te,{className:"bg-white/5 border-white/10",children:e.jsx(se,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx(K,{placeholder:"Search by name or email...",value:s,onChange:c=>a(c.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400"})]}),e.jsxs(Re,{value:o,onValueChange:i,children:[e.jsx(Se,{className:"w-[150px] bg-slate-700/50 border-slate-600 text-white",children:e.jsx(_e,{placeholder:"Role"})}),e.jsxs(Pe,{className:"bg-slate-700 border-slate-600",children:[e.jsx(k,{value:"all",children:"All Roles"}),e.jsx(k,{value:"admin",children:"Admin"}),e.jsx(k,{value:"researcher",children:"Researcher"})]})]}),e.jsxs(Re,{value:d,onValueChange:m,children:[e.jsx(Se,{className:"w-[150px] bg-slate-700/50 border-slate-600 text-white",children:e.jsx(_e,{placeholder:"Status"})}),e.jsxs(Pe,{className:"bg-slate-700 border-slate-600",children:[e.jsx(k,{value:"all",children:"All Status"}),e.jsx(k,{value:"active",children:"Active"}),e.jsx(k,{value:"inactive",children:"Inactive"})]})]})]})})}),e.jsx(te,{className:"bg-white/5 border-white/10",children:e.jsx(se,{className:"p-0",children:fe?e.jsx("div",{className:"p-6 space-y-4",children:[1,2,3,4,5].map(c=>e.jsx(Ls,{className:"h-12 bg-white/5"},c))}):Je.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No users found"}),e.jsx("p",{className:"text-slate-400",children:"Try adjusting your search or filters"})]}):e.jsxs(bt,{children:[e.jsx(jt,{children:e.jsxs(Be,{className:"border-white/10 hover:bg-transparent",children:[e.jsx(H,{className:"text-slate-400",children:"User"}),e.jsx(H,{className:"text-slate-400",children:"Email"}),e.jsx(H,{className:"text-slate-400",children:"Role"}),e.jsx(H,{className:"text-slate-400",children:"Status"}),e.jsx(H,{className:"text-slate-400",children:"Created"}),e.jsx(H,{className:"text-slate-400 text-right",children:"Actions"})]})}),e.jsx(Nt,{children:Je.map(c=>{var T;return e.jsxs(Be,{className:"border-white/10 hover:bg-white/5",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${c.role==="admin"?"bg-purple-500/20":"bg-blue-500/20"}`,children:c.role==="admin"?e.jsx(mt,{className:"w-4 h-4 text-purple-400"}):e.jsx(pt,{className:"w-4 h-4 text-blue-400"})}),e.jsx("div",{children:e.jsxs("p",{className:"font-medium text-white",children:[c.firstName," ",c.lastName]})})]})}),e.jsx(q,{className:"text-slate-300",children:c.email}),e.jsx(q,{children:e.jsx(dt,{className:c.role==="admin"?"bg-purple-500/20 text-purple-300":"bg-blue-500/20 text-blue-300",children:c.role})}),e.jsx(q,{children:e.jsx(dt,{className:c.isActive?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300",children:c.isActive?"Active":"Inactive"})}),e.jsx(q,{className:"text-slate-400",children:new Date(c.createdAt).toLocaleDateString()}),e.jsx(q,{className:"text-right",children:e.jsxs(pn,{children:[e.jsx(hn,{asChild:!0,children:e.jsx(E,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white hover:bg-white/10",children:e.jsx(Ws,{className:"w-4 h-4"})})}),e.jsxs(fs,{align:"end",className:"bg-slate-800 border-slate-700",children:[e.jsxs(Ee,{onClick:()=>ws(c),className:"text-slate-300 focus:bg-white/10 focus:text-white",children:[e.jsx(Js,{className:"w-4 h-4 mr-2"}),"Edit User"]}),e.jsxs(Ee,{onClick:()=>{u(c),J(!0)},className:"text-slate-300 focus:bg-white/10 focus:text-white",children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Reset Password"]}),e.jsx(gs,{className:"bg-slate-700"}),e.jsxs(Ee,{onClick:()=>{ae(c),U(!0)},className:"text-red-400 focus:bg-red-500/10 focus:text-red-400",disabled:c.id===((T=g==null?void 0:g.user)==null?void 0:T.id),children:[e.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Delete User"]})]})]})})]},c.id)})})]})})})]}),e.jsx(be,{open:me,onOpenChange:Q,children:e.jsxs(je,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Edit User"}),e.jsxs(Me,{className:"text-slate-400",children:["Update user information for ",N==null?void 0:N.email]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"First Name"}),e.jsx(K,{value:pe,onChange:c=>V(c.target.value),className:"bg-slate-700 border-slate-600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Last Name"}),e.jsx(K,{value:z,onChange:c=>he(c.target.value),className:"bg-slate-700 border-slate-600"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Role"}),e.jsxs(Re,{value:W,onValueChange:c=>ne(c),disabled:(N==null?void 0:N.id)===((nt=g==null?void 0:g.user)==null?void 0:nt.id),children:[e.jsx(Se,{className:"bg-slate-700 border-slate-600",children:e.jsx(_e,{})}),e.jsxs(Pe,{className:"bg-slate-700 border-slate-600",children:[e.jsx(k,{value:"researcher",children:"Researcher"}),e.jsx(k,{value:"admin",children:"Admin"})]})]}),(N==null?void 0:N.id)===((at=g==null?void 0:g.user)==null?void 0:at.id)&&e.jsx("p",{className:"text-xs text-slate-500",children:"You cannot change your own role"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Account Active"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Inactive users cannot log in"})]}),e.jsx(Os,{checked:Z,onCheckedChange:xe,disabled:(N==null?void 0:N.id)===((ot=g==null?void 0:g.user)==null?void 0:ot.id)})]})]}),e.jsxs(Ce,{children:[e.jsx(E,{variant:"outline",onClick:()=>Q(!1),className:"border-slate-600 text-slate-300",children:"Cancel"}),e.jsx(E,{onClick:()=>N&&ee.mutate({id:N.id,firstName:pe,lastName:z,role:W,isActive:Z}),disabled:ee.isPending,className:"bg-blue-600 hover:bg-blue-700",children:ee.isPending?"Saving...":"Save Changes"})]})]})}),e.jsx(be,{open:Le,onOpenChange:J,children:e.jsxs(je,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Reset Password"}),e.jsxs(Me,{className:"text-slate-400",children:["Set a new password for ",_==null?void 0:_.email]})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"New Password"}),e.jsx(K,{type:"password",value:y,onChange:c=>R(c.target.value),placeholder:"Min 8 characters",className:"bg-slate-700 border-slate-600"})]})}),e.jsxs(Ce,{children:[e.jsx(E,{variant:"outline",onClick:()=>J(!1),className:"border-slate-600 text-slate-300",children:"Cancel"}),e.jsx(E,{onClick:()=>_&&Fe.mutate({id:_.id,newPassword:y}),disabled:y.length<8||Fe.isPending,className:"bg-blue-600 hover:bg-blue-700",children:Fe.isPending?"Resetting...":"Reset Password"})]})]})}),e.jsx(be,{open:I,onOpenChange:U,children:e.jsxs(je,{className:"bg-slate-800 border-slate-700 text-white",children:[e.jsxs(Ne,{children:[e.jsx(ye,{children:"Delete User"}),e.jsxs(Me,{className:"text-slate-400",children:["Are you sure you want to delete ",L==null?void 0:L.email,"? This action cannot be undone."]})]}),e.jsxs(Ce,{children:[e.jsx(E,{variant:"outline",onClick:()=>U(!1),className:"border-slate-600 text-slate-300",children:"Cancel"}),e.jsx(E,{onClick:()=>L&&Ue.mutate(L.id),disabled:Ue.isPending,className:"bg-red-600 hover:bg-red-700",children:Ue.isPending?"Deleting...":"Delete User"})]})]})})]})}export{$n as default};
