import{c as I,u as z,b as E,j as e,B as y,C as m,f as g,g as N,h as f,d,e as x,p as a,I as b,Q as U,_ as B}from"./index-DsMkGSNQ.js";import{u as L,F as M,a as v,b as w,c as C,d as k,e as P,z as h,t as R}from"./form-DwDJHa6e.js";import{u as q}from"./useMutation-BIiySL2y.js";import{S as O}from"./shield-BQRmHjwx.js";import"./label-DBXjDKEQ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=I("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),T=h.object({customerName:h.string().min(1,"Name is required"),customerEmail:h.string().email("Valid email is required")}),Y={starter:{monthly:9.99,yearly:95.88,name:"Starter"},pro:{monthly:19.99,yearly:191.88,name:"Pro"}};function J(){var j;const[,t]=z(),l=new URLSearchParams(window.location.search),n=l.get("plan")||"starter",i=l.get("billing")||"monthly",F=l.get("openalexId")||void 0,o=Y[n],u=i==="yearly"?o.yearly:o.monthly,{data:p}=E({queryKey:["/api/checkout/config"]}),c=L({resolver:R(T),defaultValues:{customerName:"",customerEmail:""}}),r=q({mutationFn:async s=>(await B("POST","/api/checkout/create-session",{...s,plan:n,billingPeriod:i,openalexId:F})).json(),onSuccess:s=>{s.redirectUrl?window.location.href=s.redirectUrl:s.fallbackUrl&&t(s.fallbackUrl)}}),S=s=>{r.mutate(s)};return p&&!p.isConfigured?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("nav",{className:"sticky top-0 z-50 nav-premium",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between h-16",children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>t("/"),children:[e.jsx(y,{className:"h-7 w-7 text-white mr-2"}),e.jsx("span",{className:"text-lg font-semibold text-white",children:"Scholar.name"})]})})})}),e.jsx("div",{className:"max-w-md mx-auto px-4 py-16",children:e.jsxs(m,{children:[e.jsxs(g,{className:"text-center",children:[e.jsx(N,{children:"Payment Coming Soon"}),e.jsx(f,{children:"Online payment is being set up. Please contact us to get started."})]}),e.jsx(d,{children:e.jsx(x,{className:"w-full",onClick:()=>t("/contact"),children:"Contact Us"})})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:[e.jsx("nav",{className:"sticky top-0 z-50 nav-premium",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between h-16",children:e.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>t("/"),children:[e.jsx(y,{className:"h-7 w-7 text-white mr-2"}),e.jsx("span",{className:"text-lg font-semibold text-white",children:"Scholar.name"})]})})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Complete Your Order"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"You're one step away from your professional research portfolio."}),e.jsx(m,{className:"mb-6",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[o.name," Plan"]}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[i," billing"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",u.toFixed(2)]}),e.jsxs("span",{className:"text-muted-foreground",children:["/",i==="yearly"?"year":"month"]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[n==="starter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"scholar.name subdomain"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Publication analytics"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Monthly data sync"})]})]}),n==="pro"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Custom domain (yourname.com)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Research Passport download"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-primary"}),e.jsx("span",{children:"Weekly data sync"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Secure payment powered by MontyPay"})]})]}),e.jsxs("div",{children:[e.jsxs(m,{children:[e.jsxs(g,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Your Details"]}),e.jsx(f,{children:"Enter your information to proceed to payment"})]}),e.jsx(d,{children:e.jsx(M,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(S),className:"space-y-4",children:[e.jsx(v,{control:c.control,name:"customerName",render:({field:s})=>e.jsxs(w,{children:[e.jsx(C,{children:"Full Name"}),e.jsx(k,{children:e.jsx(b,{placeholder:"Dr. Jane Smith",...s,"data-testid":"input-customer-name"})}),e.jsx(P,{})]})}),e.jsx(v,{control:c.control,name:"customerEmail",render:({field:s})=>e.jsxs(w,{children:[e.jsx(C,{children:"Email Address"}),e.jsx(k,{children:e.jsx(b,{type:"email",placeholder:"jane.smith@university.edu",...s,"data-testid":"input-customer-email"})}),e.jsx(P,{})]})}),r.error&&e.jsx("div",{className:"p-3 rounded-lg bg-destructive/10 text-destructive text-sm",children:((j=r.error)==null?void 0:j.message)||"Payment failed. Please try again."}),e.jsx(x,{type:"submit",className:"w-full",size:"lg",disabled:r.isPending,"data-testid":"button-proceed-to-payment",children:r.isPending?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Proceed to Payment - $",u.toFixed(2)]})}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"By proceeding, you agree to our Terms of Service and Privacy Policy."})]})})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(x,{variant:"ghost",onClick:()=>t("/#pricing"),"data-testid":"button-back-to-pricing",children:"â† Back to pricing"})})]})]})})]})}export{J as default};
