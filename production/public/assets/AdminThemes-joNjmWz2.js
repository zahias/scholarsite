import{j as e,u as B,b as M}from"./vendor-query-CD7Z7DR7.js";import{r as n}from"./vendor-react-DHpf67ko.js";import{c as et,a as le,u as Z,b as J,W as tt,h as j,X as ce,g as st,P as de,d as at,e as rt,f as it,w as me,i as nt,j as ot,L as lt,B as u,U as ct,R as dt,C as te,k as se,q as ae,I as Y,v as mt,V as $,O as w}from"./index-BVqimLhm.js";import{L as R}from"./label-CQfckDKz.js";import{S as P}from"./skeleton-CsLyhTnv.js";import{e as ue,T as ut,O as ht,W as pt,C as xt,f as gt,g as ft,h as he,R as vt,P as jt,D as K,a as Q,b as H,c as W,d as G,i as U,j as V}from"./dialog-C8fiLdD3.js";import{n as X}from"./ThemeContext-XKB-XyJ8.js";import{P as re}from"./palette-j0A0WcOs.js";import{A as bt}from"./arrow-left-BxQ8oguw.js";import{P as yt}from"./plus-BUnThIpg.js";import{S as ie}from"./star-P7Ey3Fat.js";import{T as Nt}from"./trash-2-B89LEXna.js";import"./vendor-charts-4dyn6-nb.js";import"./index-C9O0koVv.js";import"./Combination-DQl6X2RY.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=et("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var pe="AlertDialog",[wt,ns]=le(pe,[ue]),A=ue(),xe=t=>{const{__scopeAlertDialog:r,...a}=t,i=A(r);return e.jsx(vt,{...i,...a,modal:!0})};xe.displayName=pe;var At="AlertDialogTrigger",ge=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=A(a);return e.jsx(ut,{...o,...i,ref:r})});ge.displayName=At;var kt="AlertDialogPortal",fe=t=>{const{__scopeAlertDialog:r,...a}=t,i=A(r);return e.jsx(jt,{...i,...a})};fe.displayName=kt;var Dt="AlertDialogOverlay",ve=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=A(a);return e.jsx(ht,{...o,...i,ref:r})});ve.displayName=Dt;var O="AlertDialogContent",[Tt,St]=wt(O),Et=tt("AlertDialogContent"),je=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,children:i,...o}=t,l=A(a),g=n.useRef(null),h=Z(r,g),b=n.useRef(null);return e.jsx(pt,{contentName:O,titleName:be,docsSlug:"alert-dialog",children:e.jsx(Tt,{scope:a,cancelRef:b,children:e.jsxs(xt,{role:"alertdialog",...l,...o,ref:h,onOpenAutoFocus:J(o.onOpenAutoFocus,p=>{var f;p.preventDefault(),(f=b.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(Et,{children:i}),e.jsx(Rt,{contentRef:g})]})})})});je.displayName=O;var be="AlertDialogTitle",ye=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=A(a);return e.jsx(gt,{...o,...i,ref:r})});ye.displayName=be;var Ne="AlertDialogDescription",Ce=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=A(a);return e.jsx(ft,{...o,...i,ref:r})});Ce.displayName=Ne;var Pt="AlertDialogAction",we=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=A(a);return e.jsx(he,{...o,...i,ref:r})});we.displayName=Pt;var Ae="AlertDialogCancel",ke=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,{cancelRef:o}=St(Ae,a),l=A(a),g=Z(r,o);return e.jsx(he,{...l,...i,ref:g})});ke.displayName=Ae;var Rt=({contentRef:t})=>{const r=`\`${O}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${O}\` by passing a \`${Ne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${O}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{var i;document.getElementById((i=t.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},Ot=xe,Ft=ge,_t=fe,De=ve,Te=je,Se=we,Ee=ke,Pe=ye,Re=Ce;const Mt=Ot,$t=Ft,It=_t,Oe=n.forwardRef(({className:t,...r},a)=>e.jsx(De,{className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:a}));Oe.displayName=De.displayName;const Fe=n.forwardRef(({className:t,...r},a)=>e.jsxs(It,{children:[e.jsx(Oe,{}),e.jsx(Te,{ref:a,className:j("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]}));Fe.displayName=Te.displayName;const _e=({className:t,...r})=>e.jsx("div",{className:j("flex flex-col space-y-2 text-center sm:text-left",t),...r});_e.displayName="AlertDialogHeader";const Me=({className:t,...r})=>e.jsx("div",{className:j("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});Me.displayName="AlertDialogFooter";const $e=n.forwardRef(({className:t,...r},a)=>e.jsx(Pe,{ref:a,className:j("text-lg font-semibold",t),...r}));$e.displayName=Pe.displayName;const Ie=n.forwardRef(({className:t,...r},a)=>e.jsx(Re,{ref:a,className:j("text-sm text-muted-foreground",t),...r}));Ie.displayName=Re.displayName;const Le=n.forwardRef(({className:t,...r},a)=>e.jsx(Se,{ref:a,className:j(ce(),t),...r}));Le.displayName=Se.displayName;const qe=n.forwardRef(({className:t,...r},a)=>e.jsx(Ee,{ref:a,className:j(ce({variant:"outline"}),"mt-2 sm:mt-0",t),...r}));qe.displayName=Ee.displayName;var ee="Checkbox",[Lt,os]=le(ee),[qt,zt]=Lt(ee),ze=n.forwardRef((t,r)=>{const{__scopeCheckbox:a,name:i,checked:o,defaultChecked:l,required:g,disabled:h,value:b="on",onCheckedChange:p,form:f,...S}=t,[c,k]=n.useState(null),y=Z(r,d=>k(d)),N=n.useRef(!1),x=c?f||!!c.closest("form"):!0,[D=!1,F]=st({prop:o,defaultProp:l,onChange:p}),L=n.useRef(D);return n.useEffect(()=>{const d=c==null?void 0:c.form;if(d){const C=()=>F(L.current);return d.addEventListener("reset",C),()=>d.removeEventListener("reset",C)}},[c,F]),e.jsxs(qt,{scope:a,state:D,disabled:h,children:[e.jsx(de.button,{type:"button",role:"checkbox","aria-checked":T(D)?"mixed":D,"aria-required":g,"data-state":Qe(D),"data-disabled":h?"":void 0,disabled:h,value:b,...S,ref:y,onKeyDown:J(t.onKeyDown,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:J(t.onClick,d=>{F(C=>T(C)?!0:!C),x&&(N.current=d.isPropagationStopped(),N.current||d.stopPropagation())})}),x&&e.jsx(Bt,{control:c,bubbles:!N.current,name:i,value:b,checked:D,required:g,disabled:h,form:f,style:{transform:"translateX(-100%)"},defaultChecked:T(l)?!1:l})]})});ze.displayName=ee;var Be="CheckboxIndicator",Ke=n.forwardRef((t,r)=>{const{__scopeCheckbox:a,forceMount:i,...o}=t,l=zt(Be,a);return e.jsx(at,{present:i||T(l.state)||l.state===!0,children:e.jsx(de.span,{"data-state":Qe(l.state),"data-disabled":l.disabled?"":void 0,...o,ref:r,style:{pointerEvents:"none",...t.style}})})});Ke.displayName=Be;var Bt=t=>{const{control:r,checked:a,bubbles:i=!0,defaultChecked:o,...l}=t,g=n.useRef(null),h=rt(a),b=it(r);n.useEffect(()=>{const f=g.current,S=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(S,"checked").set;if(h!==a&&k){const y=new Event("click",{bubbles:i});f.indeterminate=T(a),k.call(f,T(a)?!1:a),f.dispatchEvent(y)}},[h,a,i]);const p=n.useRef(T(a)?!1:a);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??p.current,...l,tabIndex:-1,ref:g,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function T(t){return t==="indeterminate"}function Qe(t){return T(t)?"indeterminate":t?"checked":"unchecked"}var He=ze,Kt=Ke;const We=n.forwardRef(({className:t,...r},a)=>e.jsx(He,{ref:a,className:j("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(Kt,{className:j("flex items-center justify-center text-current"),children:e.jsx(me,{className:"h-4 w-4"})})}));We.displayName=He.displayName;function I(t,r){if(t instanceof Error){const a=t.message,i=a.indexOf(": ");if(i!==-1){const o=a.slice(i+2);try{const l=JSON.parse(o);if(l!=null&&l.message)return l.message}catch{return o}}return a}return r}const ne={name:"",description:"",config:{colors:{primary:"#0B1F3A",primaryDark:"#061224",accent:"#F2994A",background:"#FFFFFF",surface:"#F8FAFC",text:"#1E293B",textMuted:"#64748B"}},isActive:!0,isDefault:!1};function ls(){const[,t]=nt(),{toast:r}=ot(),[a,i]=n.useState(null),[o,l]=n.useState(ne),[g,h]=n.useState(!1),[b,p]=n.useState(!1),[f,S]=n.useState(!1),[c,k]=n.useState(null),[y,N]=n.useState([]),{data:x,isLoading:D}=B({queryKey:["/api/auth/me"]}),{data:F,isLoading:L}=B({queryKey:["/api/admin/themes"],enabled:!!(x!=null&&x.user)}),d=M({mutationFn:async s=>{var v;const m={...s,name:((v=s.name)==null?void 0:v.trim())||""};return $("POST","/api/admin/themes",m)},onSuccess:()=>{w.invalidateQueries({queryKey:["/api/admin/themes"]}),w.invalidateQueries({queryKey:["/api/themes"]}),h(!1),l(ne),r({title:"Theme created",description:"The new theme has been created successfully."})},onError:s=>{r({title:"Error",description:I(s,"Failed to create theme."),variant:"destructive"})}}),C=M({mutationFn:async s=>{var v;const m={...s,name:((v=s.name)==null?void 0:v.trim())||""};return $("PATCH",`/api/admin/themes/${s.id}`,m)},onSuccess:()=>{w.invalidateQueries({queryKey:["/api/admin/themes"]}),w.invalidateQueries({queryKey:["/api/themes"]}),p(!1),i(null),r({title:"Theme updated",description:"The theme has been updated successfully."})},onError:s=>{r({title:"Error",description:I(s,"Failed to update theme."),variant:"destructive"})}}),Ge=M({mutationFn:async s=>$("DELETE",`/api/admin/themes/${s}`),onSuccess:()=>{w.invalidateQueries({queryKey:["/api/admin/themes"]}),w.invalidateQueries({queryKey:["/api/themes"]}),r({title:"Theme deleted",description:"The theme has been deleted."})},onError:s=>{r({title:"Error",description:I(s,"Failed to delete theme. Make sure no profiles are using it."),variant:"destructive"})}}),Ue=M({mutationFn:async s=>$("POST",`/api/admin/themes/${s}/set-default`),onSuccess:()=>{w.invalidateQueries({queryKey:["/api/admin/themes"]}),w.invalidateQueries({queryKey:["/api/themes"]}),r({title:"Default theme set",description:"The theme is now the default for new profiles."})},onError:s=>{r({title:"Error",description:I(s,"Failed to set default theme."),variant:"destructive"})}}),{data:_,isLoading:Ve,refetch:Qt}=B({queryKey:["/api/admin/themes/tenants"],enabled:!!(x!=null&&x.user)&&f}),q=M({mutationFn:async({themeId:s,tenantIds:m})=>$("POST",`/api/admin/themes/${s}/apply-bulk`,{tenantIds:m}),onSuccess:s=>{w.invalidateQueries({queryKey:["/api/admin/themes/tenants"]}),S(!1),k(null),N([]),r({title:"Theme applied",description:s.message||"Theme has been applied to selected tenants."})},onError:s=>{r({title:"Error",description:I(s,"Failed to apply theme to tenants."),variant:"destructive"})}}),Xe=()=>{c&&q.mutate({themeId:c.id,tenantIds:y.length>0?y:void 0})},Je=s=>{N(m=>m.includes(s)?m.filter(v=>v!==s):[...m,s])},Ye=()=>{_&&N(_.map(s=>s.id))},Ze=()=>{N([])};if(D)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(P,{className:"h-20 w-full bg-white/5"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(P,{className:"h-32 bg-white/5"}),e.jsx(P,{className:"h-32 bg-white/5"})]})]})});if(!(x!=null&&x.user)||x.user.role!=="admin")return t("/admin/login"),null;const z=F||[];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[e.jsx("header",{className:"border-b border-white/10 bg-white/5 backdrop-blur-lg sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-xl flex items-center justify-center",children:e.jsx(re,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Theme Management"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Customize portfolio themes"})]})]}),e.jsx(lt,{href:"/admin",children:e.jsxs(u,{variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/10","data-testid":"button-back-admin",children:[e.jsx(bt,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"Available Themes"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(K,{open:f,onOpenChange:s=>{S(s),s||(k(null),N([]))},children:[e.jsx(Q,{asChild:!0,children:e.jsxs(u,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10","data-testid":"button-bulk-apply",children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Apply Theme to Sites"]})}),e.jsxs(H,{className:"sm:max-w-xl max-h-[85vh] overflow-y-auto",children:[e.jsxs(W,{children:[e.jsx(G,{children:"Apply Theme to Sites"}),e.jsx(U,{children:"Select a theme and apply it to all or selected sites. This will update the design across those sites."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"Select Theme to Apply"}),e.jsx("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:z.map(s=>{const m=X(s.config);return e.jsxs("button",{onClick:()=>k(s),className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${(c==null?void 0:c.id)===s.id?"border-purple-500 bg-purple-500/10":"border-border hover:border-purple-500/50"}`,"data-testid":`button-select-theme-${s.id}`,children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-6 h-6 rounded border border-white/20",style:{backgroundColor:m.colors.primary}}),e.jsx("div",{className:"w-6 h-6 rounded border border-white/20 -ml-2",style:{backgroundColor:m.colors.accent}})]}),e.jsx("div",{className:"flex-1 text-left",children:e.jsx("p",{className:"text-sm font-medium",children:s.name})}),(c==null?void 0:c.id)===s.id&&e.jsx(me,{className:"w-4 h-4 text-purple-500"})]},s.id)})})]}),c&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Select Sites"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:Ye,className:"text-xs h-7",children:"Select All"}),e.jsx(u,{variant:"ghost",size:"sm",onClick:Ze,className:"text-xs h-7",children:"Deselect All"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Leave all unchecked to apply to ALL sites, or select specific sites."}),Ve?e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{className:"h-10"}),e.jsx(P,{className:"h-10"})]}):_&&_.length>0?e.jsx("div",{className:"border rounded-lg max-h-48 overflow-y-auto",children:_.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border-b last:border-b-0 hover:bg-muted/50",children:[e.jsx(We,{id:`tenant-${s.id}`,checked:y.includes(s.id),onCheckedChange:()=>Je(s.id),"data-testid":`checkbox-tenant-${s.id}`}),e.jsxs("label",{htmlFor:`tenant-${s.id}`,className:"flex-1 cursor-pointer",children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current: ",s.currentThemeName||"Default theme",s.currentThemeId===c.id&&e.jsx("span",{className:"ml-2 text-green-500",children:"(Already using this theme)"})]})]})]},s.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sites found"})]})]}),e.jsxs(V,{children:[e.jsx(u,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(u,{onClick:Xe,disabled:!c||q.isPending,className:"bg-purple-500 hover:bg-purple-600","data-testid":"button-confirm-bulk-apply",children:q.isPending?e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"w-4 h-4 mr-2 animate-spin"}),"Applying..."]}):e.jsxs(e.Fragment,{children:["Apply to ",y.length>0?`${y.length} Sites`:"All Sites"]})})]})]})]}),e.jsxs(K,{open:g,onOpenChange:h,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(u,{className:"bg-purple-500 hover:bg-purple-600","data-testid":"button-create-theme",children:[e.jsx(yt,{className:"w-4 h-4 mr-2"}),"Create Theme"]})}),e.jsxs(H,{className:"sm:max-w-lg max-h-[85vh] overflow-y-auto",children:[e.jsxs(W,{children:[e.jsx(G,{children:"Create New Theme"}),e.jsx(U,{children:"Define a new color theme for researcher portfolios."})]}),e.jsx(oe,{theme:o,onChange:s=>l(s)}),e.jsxs(V,{children:[e.jsx(u,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(u,{onClick:()=>d.mutate(o),disabled:!o.name||d.isPending,"data-testid":"button-save-new-theme",children:d.isPending?"Creating...":"Create Theme"})]})]})]})]})]}),L?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(P,{className:"h-24 bg-white/5"},s))}):z.length===0?e.jsx(te,{className:"bg-white/5 border-white/10",children:e.jsxs(se,{className:"py-12 text-center",children:[e.jsx(re,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No themes yet"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Create your first theme to get started"})]})}):e.jsx("div",{className:"grid gap-4",children:z.map(s=>{const m=X(s.config);return e.jsx(te,{className:"bg-white/5 border-white/10","data-testid":`card-theme-${s.id}`,children:e.jsx(se,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-white/20",style:{backgroundColor:m.colors.primary}}),e.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-white/20 -ml-3",style:{backgroundColor:m.colors.accent}})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium text-white",children:s.name}),s.isDefault&&e.jsxs(ae,{className:"bg-yellow-500/20 text-yellow-300",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Default"]}),!s.isActive&&e.jsx(ae,{className:"bg-slate-500/20 text-slate-400",children:"Inactive"})]}),s.description&&e.jsx("p",{className:"text-sm text-slate-400",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.isDefault&&e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>Ue.mutate(s.id),className:"text-yellow-400 hover:text-yellow-300 hover:bg-yellow-500/10","data-testid":`button-set-default-${s.id}`,children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsxs(K,{open:b&&(a==null?void 0:a.id)===s.id,onOpenChange:v=>{p(v),v||i(null)},children:[e.jsx(Q,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>i({...s,config:X(s.config)}),className:"text-slate-400 hover:text-white hover:bg-white/10","data-testid":`button-edit-${s.id}`,children:e.jsx(Ct,{className:"w-4 h-4"})})}),e.jsxs(H,{className:"sm:max-w-lg max-h-[85vh] overflow-y-auto",children:[e.jsxs(W,{children:[e.jsx(G,{children:"Edit Theme"}),e.jsx(U,{children:"Update the theme colors and settings."})]}),a&&e.jsx(oe,{theme:a,onChange:v=>i(v)}),e.jsxs(V,{children:[e.jsx(u,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(u,{onClick:()=>a&&C.mutate(a),disabled:C.isPending,"data-testid":"button-save-edit-theme",children:C.isPending?"Saving...":"Save Changes"})]})]})]}),!s.isDefault&&e.jsxs(Mt,{children:[e.jsx($t,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10","data-testid":`button-delete-${s.id}`,children:e.jsx(Nt,{className:"w-4 h-4"})})}),e.jsxs(Fe,{children:[e.jsxs(_e,{children:[e.jsx($e,{children:"Delete Theme"}),e.jsxs(Ie,{children:['Are you sure you want to delete "',s.name,'"? This action cannot be undone.']})]}),e.jsxs(Me,{children:[e.jsx(qe,{children:"Cancel"}),e.jsx(Le,{onClick:()=>Ge.mutate(s.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})]})})},s.id)})})]})]})}function oe({theme:t,onChange:r}){const a=(i,o)=>{r({...t,config:{...t.config,colors:{...t.config.colors,[i]:o}}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"name",children:"Theme Name"}),e.jsx(Y,{id:"name",value:t.name||"",onChange:i=>r({...t,name:i.target.value}),placeholder:"e.g., Ocean Blue","data-testid":"input-theme-name"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"description",children:"Description (optional)"}),e.jsx(Y,{id:"description",value:t.description||"",onChange:i=>r({...t,description:i.target.value}),placeholder:"e.g., A calm, professional blue theme","data-testid":"input-theme-description"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Colors"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{label:"Primary",value:t.config.colors.primary,onChange:i=>a("primary",i)}),e.jsx(E,{label:"Primary Dark",value:t.config.colors.primaryDark,onChange:i=>a("primaryDark",i)}),e.jsx(E,{label:"Accent",value:t.config.colors.accent,onChange:i=>a("accent",i)}),e.jsx(E,{label:"Background",value:t.config.colors.background,onChange:i=>a("background",i)}),e.jsx(E,{label:"Surface",value:t.config.colors.surface,onChange:i=>a("surface",i)}),e.jsx(E,{label:"Text",value:t.config.colors.text,onChange:i=>a("text",i)}),e.jsx(E,{label:"Text Muted",value:t.config.colors.textMuted,onChange:i=>a("textMuted",i)})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"isActive",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show this theme in the theme picker"})]}),e.jsx(mt,{id:"isActive",checked:t.isActive??!0,onCheckedChange:i=>r({...t,isActive:i}),"data-testid":"switch-theme-active"})]}),e.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:t.config.colors.surface},children:[e.jsx("p",{className:"text-sm font-medium",style:{color:t.config.colors.text},children:"Preview"}),e.jsx("div",{className:"mt-2 p-3 rounded-md",style:{backgroundColor:t.config.colors.primary},children:e.jsx("p",{className:"text-white text-sm",children:"Primary Background"})}),e.jsx("p",{className:"mt-2 text-xs",style:{color:t.config.colors.textMuted},children:"Muted text example"}),e.jsx("div",{className:"mt-2 inline-block px-3 py-1 rounded-full text-white text-xs",style:{backgroundColor:t.config.colors.accent},children:"Accent Badge"})]})]})}function E({label:t,value:r,onChange:a}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:r,onChange:i=>a(i.target.value),className:"w-10 h-10 rounded border border-border cursor-pointer"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{className:"text-xs",children:t}),e.jsx(Y,{value:r,onChange:i=>a(i.target.value),className:"h-8 text-xs font-mono"})]})]})}export{ls as default};
