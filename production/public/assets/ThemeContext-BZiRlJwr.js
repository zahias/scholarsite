import{r as u,b as i,j as b}from"./index-DsMkGSNQ.js";const d={colors:{primary:"#1e3a5f",primaryDark:"#0d1f35",accent:"#c9a227",background:"#fafbfc",surface:"#f0f4f8",text:"#1a2332",textMuted:"#5a6a7a"}};function f(t){const e=t&&typeof t=="object"?t:null,r=e!=null&&e.colors&&typeof e.colors=="object"?e.colors:{},o=e!=null&&e.typography&&typeof e.typography=="object"?e.typography:void 0;return{colors:{...d.colors,...r},...o?{typography:o}:{}}}const x=u.createContext({themes:[],currentTheme:null,setCurrentTheme:()=>{},themeConfig:d,isLoading:!0});function k(){return u.useContext(x)}function g(t){const e=document.documentElement;e.style.setProperty("--theme-primary",t.colors.primary),e.style.setProperty("--theme-primary-dark",t.colors.primaryDark),e.style.setProperty("--theme-accent",t.colors.accent),e.style.setProperty("--theme-background",t.colors.background),e.style.setProperty("--theme-surface",t.colors.surface),e.style.setProperty("--theme-text",t.colors.text),e.style.setProperty("--theme-text-muted",t.colors.textMuted);const r=o=>{const s=parseInt(o.slice(1,3),16)/255,c=parseInt(o.slice(3,5),16)/255,a=parseInt(o.slice(5,7),16)/255,n=Math.max(s,c,a),m=Math.min(s,c,a);let l=0,y=0;const p=(n+m)/2;if(n!==m){const h=n-m;switch(y=p>.5?h/(2-n-m):h/(n+m),n){case s:l=((c-a)/h+(c<a?6:0))/6;break;case c:l=((a-s)/h+2)/6;break;case a:l=((s-c)/h+4)/6;break}}return`${Math.round(l*360)} ${Math.round(y*100)}% ${Math.round(p*100)}%`};e.style.setProperty("--theme-primary-hsl",r(t.colors.primary)),e.style.setProperty("--theme-accent-hsl",r(t.colors.accent))}function T({children:t,initialThemeId:e}){const[r,o]=u.useState(null),{data:s=[],isLoading:c}=i({queryKey:["/api/themes"]}),{data:a,isLoading:n}=i({queryKey:["/api/themes/default"]});u.useEffect(()=>{if(s.length>0&&!r){if(e){const y=s.find(p=>p.id===e);if(y){o(y);return}}o(a||s[0])}},[s,a,e,r]);const m=r==null?void 0:r.config,l=u.useMemo(()=>f(m),[m]);return u.useEffect(()=>{g(l)},[l]),b.jsx(x.Provider,{value:{themes:s,currentTheme:r,setCurrentTheme:o,themeConfig:l,isLoading:c||n},children:t})}function C(t){const e=f(t);return{"--theme-primary":e.colors.primary,"--theme-primary-dark":e.colors.primaryDark,"--theme-accent":e.colors.accent,"--theme-background":e.colors.background,"--theme-surface":e.colors.surface,"--theme-text":e.colors.text,"--theme-text-muted":e.colors.textMuted}}export{T as P,C as g,f as n,k as u};
