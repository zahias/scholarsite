import{b as h,j as e}from"./vendor-query-CD7Z7DR7.js";import{i as p,j,C as g,l as b,y as w,m as f,n as N,k as v,M as F,I as n,V as y,B as S,W as C}from"./index-CSSeCMaq.js";import{u as I,z as r}from"./vendor-forms-Cwr-vjy6.js";import{F as L,a as o,b as l,c as d,d as c,e as m,t as M}from"./form-BByI_mkU.js";import"./vendor-react-DHpf67ko.js";import"./vendor-charts-4dyn6-nb.js";import"./label-Bd5zOz9s.js";const P=r.object({email:r.string().email("Invalid email address"),password:r.string().min(1,"Password is required")});function V(){const[,x]=p(),{toast:t}=j(),a=I({resolver:M(P),defaultValues:{email:"",password:""}}),i=h({mutationFn:async s=>(await C("POST","/api/auth/login",s)).json(),onSuccess:s=>{if(s.user.role!=="admin"){t({title:"Access Denied",description:"This area is for administrators only.",variant:"destructive"});return}t({title:"Welcome back!",description:`Logged in as ${s.user.firstName}`}),x("/admin")},onError:s=>{t({title:"Login Failed",description:s.message||"Invalid email or password",variant:"destructive"})}}),u=s=>{i.mutate(s)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(g,{className:"w-full max-w-md bg-white/5 backdrop-blur-lg border-white/10",children:[e.jsxs(b,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center mb-4",children:e.jsx(w,{className:"w-6 h-6 text-orange-400"})}),e.jsx(f,{className:"text-2xl text-white",children:"Scholar.name Admin"}),e.jsx(N,{className:"text-slate-400",children:"Sign in to manage customer sites"})]}),e.jsx(v,{children:e.jsx(L,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-4",children:[e.jsx(o,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-slate-300",children:"Email"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"email",placeholder:"admin@scholar.name",className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-slate-500","data-testid":"input-email"})]})}),e.jsx(m,{})]})}),e.jsx(o,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-slate-300",children:"Password"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"password",placeholder:"Enter your password",className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-slate-500","data-testid":"input-password"})]})}),e.jsx(m,{})]})}),e.jsx(S,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white",disabled:i.isPending,"data-testid":"button-login",children:i.isPending?"Signing in...":"Sign In"})]})})})]})})}export{V as default};
