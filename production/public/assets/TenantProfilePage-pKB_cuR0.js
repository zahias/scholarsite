import{b as f,r as j,j as t,C as N,d as y,i as v,G as k,n as _,k as p}from"./index-DsMkGSNQ.js";import{N as m,S as U,d as P,k as C,c as S,F as R,e as A,h as c,P as I,b as O,i as L,j as D,M as T}from"./index-DEuNjv6k.js";import{B as $}from"./building-2-9xxmfo6u.js";import{M as E}from"./mail-D8dE7q13.js";import{D as G}from"./download-Dl1CezvS.js";import{E as B}from"./external-link-By5JbUa5.js";import{F}from"./file-text-7bLv6ELf.js";import"./skeleton-LtVR_Qyf.js";import"./award-Bbq7CScr.js";import"./select-Bw0sBznx.js";import"./index-CwynGiMj.js";import"./Combination-CJn4SfTu.js";import"./index-DCOyCOZG.js";import"./separator-MX7n0DGa.js";import"./dialog-Dnm1RwJp.js";import"./star-BbXoLBND.js";import"./database-DDzPeMy7.js";import"./user-CON3jPQo.js";function M(a){if(!a)return"?";const l=a.split(" ").filter(Boolean);return l.length===1?l[0].charAt(0).toUpperCase():(l[0].charAt(0)+l[l.length-1].charAt(0)).toUpperCase()}function z(a){const l=["from-blue-500 to-blue-600","from-purple-500 to-purple-600","from-emerald-500 to-emerald-600","from-amber-500 to-amber-600","from-rose-500 to-rose-600","from-cyan-500 to-cyan-600","from-indigo-500 to-indigo-600","from-teal-500 to-teal-600"],i=a.split("").reduce((e,s)=>e+s.charCodeAt(0),0);return l[i%l.length]}function oe(){var x,h,u;const{data:a,isLoading:l,error:i}=f({queryKey:["/api/profile"],retry:!1}),e=a==null?void 0:a.profile,s=a==null?void 0:a.researcher,n=a==null?void 0:a.tenant,r=(e==null?void 0:e.openalexId)||"",g=e?`${e.displayName||(s==null?void 0:s.display_name)} - Research Profile`:"Research Profile",b=(e==null?void 0:e.bio)||(s?`${(e==null?void 0:e.displayName)||s.display_name} - ${(s==null?void 0:s.works_count)||0} publications, ${(s==null?void 0:s.cited_by_count)||0} citations`:"Research Profile"),o=typeof window<"u"?window.location.href:"",d=(e==null?void 0:e.profileImageUrl)||"https://images.unsplash.com/photo-1582750433449-648ed127bb54?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&h=500",w=j.useMemo(()=>e?{"@context":"https://schema.org","@type":"Person",name:e.displayName||(s==null?void 0:s.display_name),description:e.bio||`Researcher with ${(s==null?void 0:s.works_count)||0} publications`,jobTitle:e.title,url:o,image:d}:null,[e,s,o,d]);return l?t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(m,{researcherName:"Loading..."}),t.jsxs("section",{className:"hero-banner-compact py-8 md:py-12 relative",children:[t.jsx("div",{className:"hero-pattern"}),t.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 z-10",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-6",children:[t.jsx("div",{className:"w-20 h-20 md:w-28 md:h-28 rounded-full bg-white/20 animate-pulse flex-shrink-0"}),t.jsxs("div",{className:"text-center md:text-left space-y-2 flex-1",children:[t.jsx("div",{className:"h-7 md:h-9 bg-white/20 rounded-lg animate-pulse w-48 md:w-64 mx-auto md:mx-0"}),t.jsx("div",{className:"h-5 bg-white/15 rounded-lg animate-pulse w-36 md:w-48 mx-auto md:mx-0"}),t.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 pt-2",children:[t.jsxs("div",{className:"flex gap-1",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60 animate-bounce",style:{animationDelay:"0ms"}}),t.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60 animate-bounce",style:{animationDelay:"150ms"}}),t.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60 animate-bounce",style:{animationDelay:"300ms"}})]}),t.jsx("p",{className:"text-white/70 text-xs font-medium",children:"Loading..."})]})]})]})})]})]}):i||!a||!a.profile?t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(m,{researcherName:"Profile"}),t.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:t.jsx(N,{children:t.jsx(y,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Profile Not Configured"}),t.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"This researcher profile hasn't been set up yet. Please log in to configure your OpenAlex ID."}),t.jsx("a",{href:"/dashboard/login",className:"inline-flex items-center justify-center px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"Log In to Configure"})]})})})})]}):t.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-0","data-testid":"page-tenant-profile",children:[t.jsx(v,{title:g,description:b,image:d,url:o,author:(e==null?void 0:e.displayName)||(s==null?void 0:s.display_name)||"Researcher",type:"profile",structuredData:w||void 0}),t.jsx(m,{researcherName:(e==null?void 0:e.displayName)||(s==null?void 0:s.display_name)||"Researcher"}),t.jsxs("section",{id:"overview",className:"hero-banner-compact py-6 md:py-10 relative",children:[t.jsx("div",{className:"hero-pattern"}),t.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 z-10",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 md:gap-6 text-white",children:[t.jsx("div",{className:"flex-shrink-0",children:e!=null&&e.profileImageUrl?t.jsx("img",{src:e.profileImageUrl,alt:"Professional portrait",className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-full object-cover border-3 border-white/30 shadow-xl","data-testid":"img-profile-photo"}):t.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-full border-3 border-white/30 shadow-xl flex items-center justify-center bg-gradient-to-br ${z((e==null?void 0:e.displayName)||(s==null?void 0:s.display_name)||"")}`,"data-testid":"img-profile-photo",children:t.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white",children:M((e==null?void 0:e.displayName)||(s==null?void 0:s.display_name)||"")})})}),t.jsxs("div",{className:"flex-1 text-center md:text-left space-y-2",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold mb-1","data-testid":"text-display-name",children:(e==null?void 0:e.displayName)||(s==null?void 0:s.display_name)||"Researcher Profile"}),t.jsx("p",{className:"text-sm sm:text-base md:text-lg text-white/90","data-testid":"text-title",children:(e==null?void 0:e.title)||"Research Professional"})]}),t.jsx("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-2 text-xs sm:text-sm text-white/80",children:t.jsxs("span",{className:"inline-flex items-center gap-1.5 bg-white/10 px-2.5 py-1 rounded-full",children:[t.jsx($,{className:"w-3.5 h-3.5"}),t.jsx("span",{className:"truncate max-w-[200px] md:max-w-none","data-testid":"text-affiliation",children:(e==null?void 0:e.currentAffiliation)||((h=(x=s==null?void 0:s.last_known_institutions)==null?void 0:x[0])==null?void 0:h.display_name)||"Institution"})]})}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-1.5",children:[(e==null?void 0:e.orcidUrl)&&t.jsx("a",{href:e.orcidUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"ORCID",children:t.jsx(U,{className:"w-4 h-4"})}),(e==null?void 0:e.googleScholarUrl)&&t.jsx("a",{href:e.googleScholarUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Google Scholar",children:t.jsx(P,{className:"w-4 h-4"})}),(e==null?void 0:e.researchGateUrl)&&t.jsx("a",{href:e.researchGateUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"ResearchGate",children:t.jsx(C,{className:"w-4 h-4"})}),(e==null?void 0:e.linkedinUrl)&&t.jsx("a",{href:e.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"LinkedIn",children:t.jsx(S,{className:"w-4 h-4"})}),(e==null?void 0:e.websiteUrl)&&t.jsx("a",{href:e.websiteUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Website",children:t.jsx(k,{className:"w-4 h-4"})}),(e==null?void 0:e.twitterUrl)&&t.jsx("a",{href:e.twitterUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"X (Twitter)",children:t.jsx(R,{className:"w-4 h-4"})}),((e==null?void 0:e.contactEmail)||(e==null?void 0:e.email))&&t.jsxs("a",{href:`mailto:${e.contactEmail||e.email}`,className:"ml-1 inline-flex items-center gap-1.5 bg-white text-primary px-3 py-1.5 rounded-full text-xs sm:text-sm font-medium hover:bg-white/90 transition-colors","data-testid":"link-contact",children:[t.jsx(E,{className:"w-3.5 h-3.5"}),"Contact"]})]})]})]})})]}),((e==null?void 0:e.bio)||(e==null?void 0:e.cvUrl)||r)&&t.jsx("section",{className:"py-6 md:py-10 bg-muted/50 border-b border-border",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:gap-10",children:[(e==null?void 0:e.bio)&&t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"About"}),t.jsx("p",{className:"text-sm md:text-base text-foreground leading-relaxed","data-testid":"text-bio",children:e.bio})]}),t.jsxs("div",{className:"flex flex-wrap md:flex-col gap-2 md:gap-3",children:[(e==null?void 0:e.cvUrl)&&e.cvUrl!=="#cv-placeholder"&&t.jsxs("a",{href:e.cvUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-primary hover:text-primary/80 transition-colors","data-testid":"link-cv",children:[t.jsx(G,{className:"w-4 h-4"}),"Download CV"]}),r&&t.jsxs("a",{href:`https://openalex.org/authors/${r}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-primary hover:text-primary/80 transition-colors","data-testid":"link-openalex",children:[t.jsx(B,{className:"w-4 h-4"}),"View on OpenAlex"]})]})]})})}),t.jsx(A,{openalexId:r}),t.jsx(c,{id:"analytics",title:"Publication Analytics",icon:t.jsx(_,{className:"w-5 h-5 md:w-6 md:h-6"}),defaultOpen:!0,mobileDefaultOpen:!1,className:"bg-background",children:t.jsx(I,{openalexId:r,researcherData:a,inline:!0})}),t.jsx(c,{id:"research",title:"Research Areas",icon:t.jsx(O,{className:"w-5 h-5 md:w-6 md:h-6"}),defaultOpen:!0,mobileDefaultOpen:!1,className:"bg-muted",badge:(u=a==null?void 0:a.topics)!=null&&u.length?t.jsx(p,{variant:"secondary",className:"ml-2",children:a.topics.length}):null,children:t.jsx(L,{openalexId:r,inline:!0})}),t.jsx(c,{id:"publications",title:"Publications",icon:t.jsx(F,{className:"w-5 h-5 md:w-6 md:h-6"}),defaultOpen:!0,mobileDefaultOpen:!1,className:"bg-background",badge:s!=null&&s.works_count?t.jsx(p,{variant:"secondary",className:"ml-2",children:s.works_count}):null,children:t.jsx(D,{openalexId:r,inline:!0})}),t.jsx("footer",{className:"bg-gradient-to-br from-card to-muted/20 border-t border-border py-8",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("p",{className:"text-muted-foreground/70 text-sm",children:["Â© ",new Date().getFullYear()," ",(n==null?void 0:n.name)||"Scholar.name",". Powered by Scholar.name."]}),(a==null?void 0:a.lastSynced)&&t.jsxs("p",{className:"text-xs text-muted-foreground/60",children:["Last updated: ",new Date(a.lastSynced).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]})})}),t.jsx(T,{})]})}export{oe as default};
