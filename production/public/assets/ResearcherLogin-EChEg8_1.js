import{u as p,a as h,j as e,C as j,f as g,t as f,g as b,h as w,d as N,I as o,Z as F,e as v,_ as y}from"./index-DsMkGSNQ.js";import{u as C,F as S,a as l,b as d,c,d as m,e as u,z as i,t as I}from"./form-DwDJHa6e.js";import{u as L}from"./useMutation-BIiySL2y.js";import{M as A}from"./mail-D8dE7q13.js";import"./label-DBXjDKEQ.js";const M=i.object({email:i.string().email("Invalid email address"),password:i.string().min(1,"Password is required")});function q(){const[,n]=p(),{toast:t}=h(),a=C({resolver:I(M),defaultValues:{email:"",password:""}}),r=L({mutationFn:async s=>(await y("POST","/api/auth/login",s)).json(),onSuccess:s=>{if(s.user.role==="admin"){t({title:"Admin Account",description:"Redirecting to admin panel..."}),n("/admin");return}t({title:"Welcome back!",description:`Logged in as ${s.user.firstName}`}),n("/dashboard")},onError:s=>{t({title:"Login Failed",description:s.message||"Invalid email or password",variant:"destructive"})}}),x=s=>{r.mutate(s)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:e.jsxs(j,{className:"w-full max-w-md shadow-lg",children:[e.jsxs(g,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-br from-[#0B1F3A] to-[#233F5F] rounded-xl flex items-center justify-center mb-4",children:e.jsx(f,{className:"w-6 h-6 text-white"})}),e.jsx(b,{className:"text-2xl",children:"Scholar.name"}),e.jsx(w,{children:"Sign in to manage your academic portfolio"})]}),e.jsxs(N,{children:[e.jsx(S,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(x),className:"space-y-4",children:[e.jsx(l,{control:a.control,name:"email",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Email"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(o,{...s,type:"email",placeholder:"you@university.edu",className:"pl-10","data-testid":"input-email"})]})}),e.jsx(u,{})]})}),e.jsx(l,{control:a.control,name:"password",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Password"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(o,{...s,type:"password",placeholder:"Enter your password",className:"pl-10","data-testid":"input-password"})]})}),e.jsx(u,{})]})}),e.jsx(v,{type:"submit",className:"w-full bg-[#0B1F3A] hover:bg-[#1a3a5c]",disabled:r.isPending,"data-testid":"button-login",children:r.isPending?"Signing in...":"Sign In"})]})}),e.jsxs("p",{className:"mt-6 text-center text-sm text-slate-500",children:["Need an account?"," ",e.jsx("a",{href:"/contact",className:"text-[#F2994A] hover:underline",children:"Contact us"})]})]})]})})}export{q as default};
