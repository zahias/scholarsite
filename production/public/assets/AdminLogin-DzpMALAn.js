import{b as h,j as e}from"./vendor-query-CD7Z7DR7.js";import{i as p,j,C as g,l as b,z as w,m as f,n as N,k as v,I as n,T as F,B as S,V as y}from"./index-BFuOI41r.js";import{u as C,z as r}from"./vendor-forms-Cwr-vjy6.js";import{F as I,a as o,b as l,c as d,d as m,e as c,t as L}from"./form-DJ3Z3MmY.js";import{M}from"./mail-Dz_RMDNW.js";import"./vendor-react-DHpf67ko.js";import"./vendor-charts-4dyn6-nb.js";import"./label-DA6Rgy3x.js";const P=r.object({email:r.string().email("Invalid email address"),password:r.string().min(1,"Password is required")});function V(){const[,x]=p(),{toast:t}=j(),a=C({resolver:L(P),defaultValues:{email:"",password:""}}),i=h({mutationFn:async s=>(await y("POST","/api/auth/login",s)).json(),onSuccess:s=>{if(s.user.role!=="admin"){t({title:"Access Denied",description:"This area is for administrators only.",variant:"destructive"});return}t({title:"Welcome back!",description:`Logged in as ${s.user.firstName}`}),x("/admin")},onError:s=>{t({title:"Login Failed",description:s.message||"Invalid email or password",variant:"destructive"})}}),u=s=>{i.mutate(s)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:e.jsxs(g,{className:"w-full max-w-md bg-white/5 backdrop-blur-lg border-white/10",children:[e.jsxs(b,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center mb-4",children:e.jsx(w,{className:"w-6 h-6 text-orange-400"})}),e.jsx(f,{className:"text-2xl text-white",children:"Scholar.name Admin"}),e.jsx(N,{className:"text-slate-400",children:"Sign in to manage customer sites"})]}),e.jsx(v,{children:e.jsx(I,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-4",children:[e.jsx(o,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-slate-300",children:"Email"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"email",placeholder:"admin@scholar.name",className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-slate-500","data-testid":"input-email"})]})}),e.jsx(c,{})]})}),e.jsx(o,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(d,{className:"text-slate-300",children:"Password"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-3 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"password",placeholder:"Enter your password",className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-slate-500","data-testid":"input-password"})]})}),e.jsx(c,{})]})}),e.jsx(S,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white",disabled:i.isPending,"data-testid":"button-login",children:i.isPending?"Signing in...":"Sign In"})]})})})]})})}export{V as default};
