import{b as p,j as e}from"./vendor-query-CD7Z7DR7.js";import{u as h,a as j,S as g,G as f,C as b,d as w,q as N,e as v,f as F,b as S,I as o,W as y,B as C,X as I}from"./index-D7esoN3j.js";import{u as L,z as i}from"./vendor-forms-Cwr-vjy6.js";import{F as A,a as l,b as c,c as d,d as m,e as u,t as E}from"./form-B-lvOBIH.js";import{M}from"./mail-BTluqxJI.js";import"./vendor-react-DHpf67ko.js";import"./vendor-charts-DWrkikYz.js";import"./label-BaOSo9_9.js";const P=i.object({email:i.string().email("Invalid email address"),password:i.string().min(1,"Password is required")});function D(){const[,n]=h(),{toast:t}=j(),a=L({resolver:E(P),defaultValues:{email:"",password:""}}),r=p({mutationFn:async s=>(await I("POST","/api/auth/login",s)).json(),onSuccess:s=>{if(s.user.role==="admin"){t({title:"Admin Account",description:"Redirecting to admin panel..."}),n("/admin");return}t({title:"Welcome back!",description:`Logged in as ${s.user.firstName}`}),n("/dashboard")},onError:s=>{t({title:"Login Failed",description:s.message||"Invalid email or password",variant:"destructive"})}}),x=s=>{r.mutate(s)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex flex-col",children:[e.jsx(g,{title:"Sign In â€” Scholar.name",description:"Sign in to manage your academic portfolio on Scholar.name.",url:"https://scholar.name/dashboard/login",type:"website"}),e.jsx(f,{mode:"auth"}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs(b,{className:"w-full max-w-md shadow-lg",children:[e.jsxs(w,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-br from-[#0B1F3A] to-[#233F5F] rounded-xl flex items-center justify-center mb-4",children:e.jsx(N,{className:"w-6 h-6 text-white"})}),e.jsx(v,{className:"text-2xl",children:"Scholar.name"}),e.jsx(F,{children:"Sign in to manage your academic portfolio"})]}),e.jsxs(S,{children:[e.jsx(A,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(x),className:"space-y-4",children:[e.jsx(l,{control:a.control,name:"email",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(o,{...s,type:"email",placeholder:"you@university.edu",className:"pl-10","data-testid":"input-email"})]})}),e.jsx(u,{})]})}),e.jsx(l,{control:a.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(o,{...s,type:"password",placeholder:"Enter your password",className:"pl-10","data-testid":"input-password"})]})}),e.jsx(u,{})]})}),e.jsx(C,{type:"submit",className:"w-full bg-[#0B1F3A] hover:bg-[#1a3a5c]",disabled:r.isPending,"data-testid":"button-login",children:r.isPending?"Signing in...":"Sign In"})]})}),e.jsxs("p",{className:"mt-6 text-center text-sm text-slate-500",children:["Need an account?"," ",e.jsx("a",{href:"/contact",className:"text-[#F2994A] hover:underline",children:"Contact us"})]})]})]})})]})}export{D as default};
